# ğŸš€ API Modular - Node.js & Express# ï¿½ API Multi-Funcional



[![Node.js](https://img.shields.io/badge/Node.js-22.18.0+-339933?logo=node.js&logoColor=white)](https://nodejs.org/)> API REST modular com validaÃ§Ã£o, processamento de PDF e cÃ¡lculos matemÃ¡ticos

[![Express](https://img.shields.io/badge/Express-5.1.0-000000?logo=express&logoColor=white)](https://expressjs.com/)

[![License](https://img.shields.io/badge/License-MIT-blue.svg)](LICENSE)[![Node.js](https://img.shields.io/badge/Node.js-22.18.0+-green.svg)](https://nodejs.org/)

[![Made with â¤ï¸](https://img.shields.io/badge/Made%20with-â¤%20ï¸-red.svg)](https://github.com/gilbertoromanholew/api)[![Express](https://img.shields.io/badge/Express-5.1.0-blue.svg)](https://expressjs.com/)

[![Status](https://img.shields.io/badge/Status-Online-success.svg)](https://api.samm.host)

> **API moderna e extensÃ­vel com arquitetura modular, auto-carregamento de rotas e sistema de templates para desenvolvimento rÃ¡pido.**

---

---

## ğŸ“‹ Ãndice

## âœ¨ CaracterÃ­sticas

- [VisÃ£o Geral](#-visÃ£o-geral)

- ğŸ¯ **Arquitetura Modular** - Funcionalidades independentes e auto-descobertas- [Funcionalidades](#-funcionalidades)

- âš¡ **Auto-carregamento** - Rotas descobertas e registradas automaticamente- [InstalaÃ§Ã£o](#-instalaÃ§Ã£o)

- ğŸ›¡ï¸ **ValidaÃ§Ã£o Centralizada** - Sistema de schemas reutilizÃ¡veis- [ConfiguraÃ§Ã£o](#-configuraÃ§Ã£o)

- ğŸ¨ **Respostas Padronizadas** - BaseController para consistÃªncia- [Uso](#-uso)

- ğŸ“ **DocumentaÃ§Ã£o AutomÃ¡tica** - Dashboard web com lista de funcionalidades- [Estrutura](#-estrutura-do-projeto)

- ğŸ”’ **Controle de Acesso** - Filtro de IP e logs de acessos- [SeguranÃ§a](#-seguranÃ§a)

- ğŸš¦ **Tratamento de Erros** - Global error handler e 404 customizado- [Deploy](#-deploy)

- ğŸ“¦ **Sistema de Templates** - Crie novas funcionalidades em 5 minutos- [Desenvolvimento](#-desenvolvimento)

- ğŸŒ **CORS Habilitado** - Pronto para APIs pÃºblicas

- ğŸ“Š **Dashboard de Logs** - Visualize acessos em tempo real---



---## ğŸ¯ VisÃ£o Geral



## ğŸ“‹ ÃndiceAPI REST modular construÃ­da com Node.js e Express, oferecendo mÃºltiplas funcionalidades:

- âœ… ValidaÃ§Ã£o de documentos (CPF)

- [InstalaÃ§Ã£o](#-instalaÃ§Ã£o)- ğŸ“„ ExtraÃ§Ã£o de texto de PDFs

- [InÃ­cio RÃ¡pido](#-inÃ­cio-rÃ¡pido)- ğŸ§® OperaÃ§Ãµes matemÃ¡ticas

- [Arquitetura](#-arquitetura)- ğŸ”’ Filtro de IP para seguranÃ§a

- [Endpoints DisponÃ­veis](#-endpoints-disponÃ­veis)- ğŸ“š DocumentaÃ§Ã£o interativa

- [Como Criar Nova Funcionalidade](#-como-criar-nova-funcionalidade)

- [ConfiguraÃ§Ã£o](#-configuraÃ§Ã£o)**URL de ProduÃ§Ã£o**: https://api.samm.host

- [Exemplos de Uso](#-exemplos-de-uso)

- [Estrutura do Projeto](#-estrutura-do-projeto)---

- [DocumentaÃ§Ã£o Adicional](#-documentaÃ§Ã£o-adicional)

- [Contribuindo](#-contribuindo)## âš¡ Funcionalidades

- [LicenÃ§a](#-licenÃ§a)

### 1. ğŸ“š DocumentaÃ§Ã£o da API

---

#### `GET /`

## ğŸ”§ InstalaÃ§Ã£oRetorna documentaÃ§Ã£o completa em JSON com todos os endpoints, parÃ¢metros e exemplos.



### PrÃ©-requisitos```bash

curl https://api.samm.host/

- **Node.js** >= 22.18.0```

- **npm** ou **yarn**

#### `GET /docs`

### Clonar e InstalarPÃ¡gina HTML interativa com a documentaÃ§Ã£o visual.



```bash```bash

# Clonar repositÃ³rio# Acesse no navegador:

git clone https://github.com/gilbertoromanholew/api.githttps://api.samm.host/docs

cd api```



# Instalar dependÃªncias---

npm install

### 2. âœ… ValidaÃ§Ã£o de CPF

# Configurar variÃ¡veis de ambiente

cp .env.example .env#### `POST /validate-cpf`

# Edite o arquivo .env conforme necessÃ¡rio

Valida CPFs brasileiros usando o algoritmo oficial.

# Iniciar servidor

npm start**RequisiÃ§Ã£o:**

``````bash

curl -X POST https://api.samm.host/validate-cpf \

O servidor estarÃ¡ rodando em **http://localhost:3000** ğŸ‰  -H "Content-Type: application/json" \

  -d '{"cpf": "12345678901"}'

---```



## ğŸš€ InÃ­cio RÃ¡pido**Resposta de Sucesso:**

```json

### Testar a API{

  "valido": true,

```bash  "cpf": "123.456.789-01",

# Ver informaÃ§Ãµes da API  "mensagem": "CPF vÃ¡lido"

curl http://localhost:3000/}

```

# Acessar documentaÃ§Ã£o HTML

curl http://localhost:3000/docs**Resposta de Erro:**

```json

# Listar usuÃ¡rios exemplo{

curl http://localhost:3000/usuarios  "valido": false,

  "cpf": "12345678901",

# Criar novo usuÃ¡rio  "mensagem": "CPF invÃ¡lido"

curl -X POST http://localhost:3000/usuarios \}

  -H "Content-Type: application/json" \```

  -d '{"nome":"JoÃ£o Silva","email":"joao@exemplo.com","idade":30}'

---

# Buscar usuÃ¡rio por ID

curl http://localhost:3000/usuarios/1### 3. ğŸ“„ Leitura de PDF



# Ver estatÃ­sticas#### `POST /read-pdf`

curl http://localhost:3000/usuarios/estatisticas

Extrai texto de arquivos PDF.

# Ler PDF

curl -X POST http://localhost:3000/read-pdf \**RequisiÃ§Ã£o:**

  -F "pdf=@caminho/para/arquivo.pdf"```bash

```curl -X POST https://api.samm.host/read-pdf \

  -F "pdf=@documento.pdf"

---```



## ğŸ—ï¸ Arquitetura**Resposta:**

```json

### VisÃ£o Geral{

  "success": true,

A API utiliza uma **arquitetura modular** onde cada funcionalidade Ã© auto-contida e descoberta automaticamente.  "texto": "ConteÃºdo extraÃ­do do PDF...",

  "paginas": 5,

```  "info": {

src/    "titulo": "Documento",

â”œâ”€â”€ core/    "autor": "Autor"

â”‚   â”œâ”€â”€ BaseController.js      # Classe base para controllers  }

â”‚   â””â”€â”€ routeLoader.js          # Auto-carregador de rotas}

â”œâ”€â”€ middlewares/```

â”‚   â”œâ”€â”€ validator.js            # ValidaÃ§Ã£o centralizada

â”‚   â”œâ”€â”€ errorHandler.js         # Tratamento global de erros---

â”‚   â””â”€â”€ ipFilter.js             # Controle de acesso por IP

â”œâ”€â”€ funcionalidades/### 4. ğŸ§® Calculadora

â”‚   â”œâ”€â”€ _TEMPLATE/              # Template para novas features

â”‚   â”œâ”€â”€ exemplo/                # CRUD de usuÃ¡rios (exemplo)#### `POST /calcular`

â”‚   â””â”€â”€ pdf/                    # Leitura de PDF

â”œâ”€â”€ config/Realiza operaÃ§Ãµes matemÃ¡ticas.

â”‚   â””â”€â”€ index.js                # ConfiguraÃ§Ãµes centralizadas

â””â”€â”€ routes/**OperaÃ§Ãµes disponÃ­veis:**

    â”œâ”€â”€ docs.js                 # DocumentaÃ§Ã£o HTML- `somar` - AdiÃ§Ã£o

    â”œâ”€â”€ logsDashboard.js        # Dashboard de logs- `subtrair` - SubtraÃ§Ã£o

    â””â”€â”€ logsRoutes.js           # API de logs- `multiplicar` - MultiplicaÃ§Ã£o

```- `dividir` - DivisÃ£o

- `porcentagem` - CÃ¡lculo de percentual

### Fluxo de RequisiÃ§Ã£o

**RequisiÃ§Ã£o:**

``````bash

Cliente â†’ IP Filter â†’ CORS â†’ Validator â†’ Controller â†’ Responsecurl -X POST https://api.samm.host/calcular \

                                â†“  -H "Content-Type: application/json" \

                          Error Handler (se erro)  -d '{"operacao": "somar", "a": 10, "b": 5}'

``````



### Componentes Principais**Resposta:**

```json

#### 1. **BaseController**{

Classe base que todos os controllers estendem, fornecendo:  "operacao": "somar",

- `success(res, data, message, statusCode)` - Resposta de sucesso padronizada  "a": 10,

- `error(res, message, statusCode, errors)` - Resposta de erro padronizada  "b": 5,

- `execute(req, res, handler)` - Wrapper com try-catch automÃ¡tico  "resultado": 15

}

#### 2. **Auto-loader**```

Sistema que descobre e registra rotas automaticamente:

- Varre `src/funcionalidades/` em busca de arquivos `*Routes.js`**Exemplo de Porcentagem:**

- Registra rotas no Express automaticamente```bash

- Ignora pasta `_TEMPLATE`curl -X POST https://api.samm.host/calcular \

  -H "Content-Type: application/json" \

#### 3. **Validator**  -d '{"operacao": "porcentagem", "a": 100, "b": 15}'

Middleware de validaÃ§Ã£o com schemas reutilizÃ¡veis:```

- ValidaÃ§Ã£o de campos obrigatÃ³riosRetorna: `15` (15% de 100)

- ValidaÃ§Ã£o de tipos

- ValidaÃ§Ã£o de comprimento---

- ValidaÃ§Ã£o de valores enum

## ğŸ”§ InstalaÃ§Ã£o

#### 4. **Error Handler**

Tratamento global de erros:### PrÃ©-requisitos

- Captura todos os erros nÃ£o tratados- Node.js >= 22.18.0

- Handler personalizado para 404- npm >= 10.x

- Stack trace em ambiente de desenvolvimento

### Passos

---

1. **Clone o repositÃ³rio:**

## ğŸ“¡ Endpoints DisponÃ­veis```bash

git clone https://github.com/gilbertoromanholew/api.git

### Sistemacd api

```

| MÃ©todo | Endpoint | DescriÃ§Ã£o |

|--------|----------|-----------|2. **Instale as dependÃªncias:**

| `GET` | `/` | InformaÃ§Ãµes da API em JSON |```bash

| `GET` | `/docs` | DocumentaÃ§Ã£o HTML interativa |npm install

| `GET` | `/logs` | Dashboard de logs em tempo real |```

| `GET` | `/api/logs` | API de logs (JSON) |

3. **Configure as variÃ¡veis de ambiente:**

### Funcionalidade: Exemplo (CRUD de UsuÃ¡rios)```bash

cp .env.example .env

| MÃ©todo | Endpoint | DescriÃ§Ã£o |```

|--------|----------|-----------|

| `GET` | `/usuarios` | Lista todos os usuÃ¡rios (com filtros) |4. **Inicie o servidor:**

| `GET` | `/usuarios/estatisticas` | EstatÃ­sticas dos usuÃ¡rios |```bash

| `GET` | `/usuarios/:id` | Busca usuÃ¡rio por ID |npm start

| `POST` | `/usuarios` | Cria novo usuÃ¡rio |```

| `PUT` | `/usuarios/:id` | Atualiza usuÃ¡rio |

| `DELETE` | `/usuarios/:id` | Remove usuÃ¡rio |5. **Acesse a API:**

```

**Filtros disponÃ­veis em GET /usuarios:**http://localhost:3000

- `?ativo=true/false` - Filtrar por status```

- `?idade_min=25` - Idade mÃ­nima

- `?idade_max=40` - Idade mÃ¡xima---



### Funcionalidade: PDF## âš™ï¸ ConfiguraÃ§Ã£o



| MÃ©todo | Endpoint | DescriÃ§Ã£o |### Arquivo `.env`

|--------|----------|-----------|

| `POST` | `/read-pdf` | Extrai texto de arquivo PDF |Copie `.env.example` para `.env` e configure:



---```env

# Servidor

## ğŸ†• Como Criar Nova FuncionalidadePORT=3000

HOST=0.0.0.0

### MÃ©todo 1: Copiar Template (5 minutos)

# SeguranÃ§a - IPs autorizados (separados por vÃ­rgula)

```powershellALLOWED_IPS=127.0.0.1,192.168.1.100,177.73.205.198

# 1. Copiar template

Copy-Item -Path "src/funcionalidades/_TEMPLATE" -Destination "src/funcionalidades/minha-feature" -Recurse# Logs

LOG_LEVEL=info

# 2. Renomear arquivosLOG_FILE=false

# template* â†’ minhafeature*```



# 3. Editar controller e routes### ConfiguraÃ§Ã£o de IPs Autorizados

# Implementar sua lÃ³gica

Por padrÃ£o, `localhost` (127.0.0.1 e ::1) sempre Ã© permitido. Adicione outros IPs conforme necessÃ¡rio:

# 4. Reiniciar servidor

npm start```env

ALLOWED_IPS=192.168.1.100,177.73.205.198,104.23.254.125

# âœ… Pronto! As rotas serÃ£o descobertas automaticamente```

```

**Importante:** Se usar Cloudflare ou proxy, desabilite o proxy (DNS only) ou adicione o IP do proxy.

### MÃ©todo 2: Manual

---

1. **Criar pasta** em `src/funcionalidades/`## ğŸ“ Estrutura do Projeto

2. **Criar Controller** estendendo `BaseController`

3. **Criar Routes** exportando um `Router` do Express```

4. **Reiniciar servidor** - Auto-descoberta farÃ¡ o resto!api/

â”œâ”€â”€ .env                         # VariÃ¡veis de ambiente (nÃ£o commitar)

### Exemplo MÃ­nimoâ”œâ”€â”€ .env.example                 # Template de configuraÃ§Ã£o

â”œâ”€â”€ .gitignore                   # Arquivos ignorados pelo git

```javascriptâ”œâ”€â”€ package.json                 # DependÃªncias e scripts

// src/funcionalidades/hello/helloController.jsâ”œâ”€â”€ package-lock.json            # Lock de dependÃªncias

import { BaseController } from '../../core/BaseController.js';â”œâ”€â”€ server.js                    # Arquivo principal da aplicaÃ§Ã£o

â”œâ”€â”€ README.md                    # DocumentaÃ§Ã£o principal

class HelloController extends BaseController {â”‚

    async sayHello(req, res) {â””â”€â”€ src/

        return this.execute(req, res, async (req, res) => {    â”œâ”€â”€ config/                  # ConfiguraÃ§Ãµes

            const { nome } = req.body;    â”‚   â”œâ”€â”€ index.js             # Carrega variÃ¡veis do .env

            return this.success(res, { mensagem: `OlÃ¡, ${nome}!` });    â”‚   â””â”€â”€ allowedIPs.js        # Lista de IPs autorizados

        });    â”‚

    }    â”œâ”€â”€ middlewares/             # Middlewares Express

}    â”‚   â””â”€â”€ ipFilter.js          # Filtro de seguranÃ§a por IP

    â”‚

export default new HelloController();    â”œâ”€â”€ routes/                  # Rotas principais

```    â”‚   â”œâ”€â”€ index.js             # GET / (documentaÃ§Ã£o JSON)

    â”‚   â””â”€â”€ docs.js              # GET /docs (pÃ¡gina HTML)

```javascript    â”‚

// src/funcionalidades/hello/helloRoutes.js    â”œâ”€â”€ utils/                   # UtilitÃ¡rios

import { Router } from 'express';    â”‚   â””â”€â”€ pdfParseWrapper.cjs  # Wrapper CommonJS para pdf-parse

import helloController from './helloController.js';    â”‚

    â””â”€â”€ funcionalidades/         # Funcionalidades modulares

const router = Router();        â”‚

router.post('/hello', (req, res) => helloController.sayHello(req, res));        â”œâ”€â”€ validacao/           # ValidaÃ§Ã£o de documentos

export default router;        â”‚   â”œâ”€â”€ README.md        # DocumentaÃ§Ã£o da funcionalidade

```        â”‚   â”œâ”€â”€ cpfValidator.js  # Algoritmo de validaÃ§Ã£o CPF

        â”‚   â”œâ”€â”€ cpfController.js # Controller de requisiÃ§Ãµes

**Pronto!** Reinicie o servidor e acesse `POST /hello`        â”‚   â””â”€â”€ cpfRoutes.js     # Rotas: POST /validate-cpf

        â”‚

---        â”œâ”€â”€ pdf/                 # Processamento de PDF

        â”‚   â”œâ”€â”€ README.md        # DocumentaÃ§Ã£o da funcionalidade

## âš™ï¸ ConfiguraÃ§Ã£o        â”‚   â”œâ”€â”€ pdfController.js # Controller de PDF

        â”‚   â””â”€â”€ pdfRoutes.js     # Rotas: POST /read-pdf

### VariÃ¡veis de Ambiente (.env)        â”‚

        â”œâ”€â”€ calculo/             # OperaÃ§Ãµes matemÃ¡ticas

```env        â”‚   â”œâ”€â”€ README.md        # DocumentaÃ§Ã£o da funcionalidade

# Servidor        â”‚   â”œâ”€â”€ calculoUtils.js  # FunÃ§Ãµes matemÃ¡ticas

PORT=3000        â”‚   â”œâ”€â”€ calculoController.js # Controller de cÃ¡lculos

HOST=0.0.0.0        â”‚   â””â”€â”€ calculoRoutes.js # Rotas: POST /calcular

NODE_ENV=development        â”‚

        â””â”€â”€ extras/              # Funcionalidades futuras

# SeguranÃ§a            â””â”€â”€ README.md        # Planejamento de features

ALLOWED_IPS=192.168.1.1,10.0.0.1  # IPs permitidos (vazio = todos)```

CORS_ORIGIN=*                     # Origem CORS permitida

**Total:** ~20 arquivos essenciais de cÃ³digo + documentaÃ§Ã£o

# Rate Limiting

RATE_LIMIT_WINDOW=60000           # Janela em ms (1 min)---

RATE_LIMIT_MAX=100                # MÃ¡ximo de requisiÃ§Ãµes

## ğŸ”’ SeguranÃ§a

# Logs

MAX_LOGS=100                      # MÃ¡ximo de logs em memÃ³ria### Filtro de IP

LOG_RETENTION_DAYS=7              # Dias para manter logs

A API implementa um sistema de whitelist de IPs:

# Upload

MAX_FILE_SIZE=5242880             # Tamanho mÃ¡ximo (5MB)- âœ… **IPs autorizados** â†’ Acesso total Ã  API

```- âŒ **IPs nÃ£o autorizados** â†’ Erro 403



### ConfiguraÃ§Ã£o Centralizada**ConfiguraÃ§Ã£o no `.env`:**

```env

Todas as configuraÃ§Ãµes estÃ£o em `src/config/index.js`:ALLOWED_IPS=192.168.1.100,177.73.205.198

```

```javascript

import config from './src/config/index.js';**Sempre permitidos:**

- `127.0.0.1` (localhost IPv4)

// Uso- `::1` (localhost IPv6)

config.server.port        // 3000

config.security.corsOrigin  // '*'### Suporte a Proxies

config.logs.maxLogs       // 100

config.upload.maxFileSize // 5242880O filtro de IP detecta automaticamente o IP real atravÃ©s de headers:

```- `X-Forwarded-For` (proxies, load balancers)

- `X-Real-IP` (nginx, Apache)

---- `req.ip` (conexÃ£o direta)



## ğŸ’¡ Exemplos de Uso**Cloudflare:** Configure como "DNS only" (desabilitar proxy) para que o IP real seja detectado.



### Exemplo 1: Listar UsuÃ¡rios com Filtros---



**RequisiÃ§Ã£o:**## ğŸš€ Deploy

```bash

curl "http://localhost:3000/usuarios?ativo=true&idade_min=25&idade_max=35"### Deploy em VPS

```

1. **Conectar ao servidor:**

**Resposta:**```bash

```jsonssh usuario@seu-servidor.com

{```

  "success": true,

  "message": "2 usuÃ¡rio(s) encontrado(s)",2. **Instalar Node.js (se necessÃ¡rio):**

  "data": {```bash

    "total": 2,curl -fsSL https://deb.nodesource.com/setup_22.x | sudo -E bash -

    "usuarios": [sudo apt-get install -y nodejs

      {```

        "id": 1,

        "nome": "JoÃ£o Silva",3. **Clonar o repositÃ³rio:**

        "email": "joao@exemplo.com",```bash

        "idade": 30,git clone https://github.com/gilbertoromanholew/api.git

        "ativo": truecd api

      },```

      {

        "id": 2,4. **Instalar dependÃªncias:**

        "nome": "Maria Santos",```bash

        "email": "maria@exemplo.com",npm install

        "idade": 25,```

        "ativo": true

      }5. **Configurar variÃ¡veis:**

    ]```bash

  }cp .env.example .env

}nano .env  # Editar configuraÃ§Ãµes

``````



### Exemplo 2: Criar UsuÃ¡rio6. **Instalar PM2 (gerenciador de processos):**

```bash

**RequisiÃ§Ã£o:**sudo npm install -g pm2

```bash```

curl -X POST http://localhost:3000/usuarios \

  -H "Content-Type: application/json" \7. **Iniciar a aplicaÃ§Ã£o:**

  -d '{```bash

    "nome": "Pedro Costa",pm2 start server.js --name api

    "email": "pedro@exemplo.com",pm2 save

    "idade": 28,pm2 startup  # Configurar inicializaÃ§Ã£o automÃ¡tica

    "ativo": true```

  }'

```8. **Verificar status:**

```bash

**Resposta:**pm2 status

```jsonpm2 logs api

{```

  "success": true,

  "message": "UsuÃ¡rio criado com sucesso",### Atualizar Deploy

  "data": {

    "id": 4,```bash

    "nome": "Pedro Costa",cd /caminho/da/api

    "email": "pedro@exemplo.com",git pull origin main

    "idade": 28,npm install

    "ativo": true,pm2 restart api

    "criadoEm": "2025-10-16T19:30:00.000Z"```

  }

}### Configurar HTTPS (Nginx + Let's Encrypt)

```

1. **Instalar Nginx:**

### Exemplo 3: Erro de ValidaÃ§Ã£o```bash

sudo apt install nginx

**RequisiÃ§Ã£o:**```

```bash

curl -X POST http://localhost:3000/usuarios \2. **Configurar proxy reverso:**

  -H "Content-Type: application/json" \```nginx

  -d '{"nome": "Jo"}'  # Nome muito curto# /etc/nginx/sites-available/api

```server {

    listen 80;

**Resposta:**    server_name api.samm.host;

```json

{    location / {

  "success": false,        proxy_pass http://localhost:3000;

  "message": "Erro de validaÃ§Ã£o",        proxy_http_version 1.1;

  "errors": [        proxy_set_header Upgrade $http_upgrade;

    "Campo 'email' Ã© obrigatÃ³rio",        proxy_set_header Connection 'upgrade';

    "Campo 'idade' Ã© obrigatÃ³rio",        proxy_set_header Host $host;

    "Campo 'nome' deve ter entre 3 e 100 caracteres"        proxy_set_header X-Real-IP $remote_addr;

  ]        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;

}        proxy_cache_bypass $http_upgrade;

```    }

}

### Exemplo 4: Ler PDF```



**RequisiÃ§Ã£o:**3. **Ativar site:**

```bash```bash

curl -X POST http://localhost:3000/read-pdf \sudo ln -s /etc/nginx/sites-available/api /etc/nginx/sites-enabled/

  -F "pdf=@documento.pdf"sudo nginx -t

```sudo systemctl restart nginx

```

**Resposta:**

```json4. **Instalar SSL:**

{```bash

  "success": true,sudo apt install certbot python3-certbot-nginx

  "message": "PDF processado com sucesso",sudo certbot --nginx -d api.samm.host

  "data": {```

    "text": "ConteÃºdo extraÃ­do do PDF...",

    "pages": 5,---

    "info": {

      "Title": "Documento Exemplo",## ğŸ› ï¸ Desenvolvimento

      "Author": "JoÃ£o Silva"

    },### Adicionar Nova Funcionalidade

    "metadata": {

      "CreationDate": "2025-10-16T10:00:00.000Z"1. **Criar estrutura:**

    }```bash

  }mkdir -p src/funcionalidades/minha-funcionalidade

}cd src/funcionalidades/minha-funcionalidade

``````



---2. **Criar arquivos:**



## ğŸ“‚ Estrutura do Projeto**`README.md`** - DocumentaÃ§Ã£o

```markdown

```# Minha Funcionalidade

api/

â”œâ”€â”€ src/## DescriÃ§Ã£o

â”‚   â”œâ”€â”€ core/...

â”‚   â”‚   â”œâ”€â”€ BaseController.js        # Classe base para controllers

â”‚   â”‚   â””â”€â”€ routeLoader.js            # Auto-carregador de rotas## Endpoint

â”‚   â”œâ”€â”€ middlewares/POST /minha-rota

â”‚   â”‚   â”œâ”€â”€ errorHandler.js           # Tratamento global de erros

â”‚   â”‚   â”œâ”€â”€ ipFilter.js               # Filtro de IP## ParÃ¢metros

â”‚   â”‚   â””â”€â”€ validator.js              # ValidaÃ§Ã£o centralizada...

â”‚   â”œâ”€â”€ funcionalidades/```

â”‚   â”‚   â”œâ”€â”€ _TEMPLATE/                # ğŸ“¦ Template para novas features

â”‚   â”‚   â”‚   â”œâ”€â”€ README.md**`minhaController.js`** - LÃ³gica

â”‚   â”‚   â”‚   â”œâ”€â”€ templateController.js```javascript

â”‚   â”‚   â”‚   â”œâ”€â”€ templateRoutes.jsexport const minhaFuncao = (req, res) => {

â”‚   â”‚   â”‚   â””â”€â”€ templateUtils.js    const { parametro } = req.body;

â”‚   â”‚   â”œâ”€â”€ exemplo/                  # âœ… CRUD de usuÃ¡rios    

â”‚   â”‚   â”‚   â”œâ”€â”€ exemploController.js    // Sua lÃ³gica aqui

â”‚   â”‚   â”‚   â””â”€â”€ exemploRoutes.js    

â”‚   â”‚   â””â”€â”€ pdf/                      # ğŸ“„ Leitura de PDF    res.json({ resultado: 'sucesso' });

â”‚   â”‚       â”œâ”€â”€ pdfController.js};

â”‚   â”‚       â””â”€â”€ pdfRoutes.js```

â”‚   â”œâ”€â”€ config/

â”‚   â”‚   â””â”€â”€ index.js                  # ConfiguraÃ§Ãµes centralizadas**`minhaRoutes.js`** - Rotas

â”‚   â”œâ”€â”€ routes/```javascript

â”‚   â”‚   â”œâ”€â”€ docs.js                   # DocumentaÃ§Ã£o HTMLimport express from 'express';

â”‚   â”‚   â”œâ”€â”€ index.js                  # Rotas de sistemaimport { minhaFuncao } from './minhaController.js';

â”‚   â”‚   â”œâ”€â”€ logsDashboard.js          # Dashboard de logs

â”‚   â”‚   â””â”€â”€ logsRoutes.js             # API de logsconst router = express.Router();

â”‚   â””â”€â”€ utils/

â”‚       â”œâ”€â”€ ipLogger.js               # Logger de acessosrouter.post('/minha-rota', minhaFuncao);

â”‚       â””â”€â”€ pdfParseWrapper.cjs       # Wrapper para pdf-parse

â”œâ”€â”€ .env                              # VariÃ¡veis de ambienteexport default router;

â”œâ”€â”€ .env.example                      # Exemplo de configuraÃ§Ã£o```

â”œâ”€â”€ package.json                      # DependÃªncias

â”œâ”€â”€ server.js                         # Entry point3. **Registrar no `server.js`:**

â””â”€â”€ README.md                         # Este arquivo```javascript

```import minhaRoutes from './src/funcionalidades/minha-funcionalidade/minhaRoutes.js';



---// ... outras importaÃ§Ãµes ...



## ğŸ“š DocumentaÃ§Ã£o Adicionalapp.use(minhaRoutes);

```

- **[GUIA_RAPIDO.md](./GUIA_RAPIDO.md)** - Guia de inÃ­cio rÃ¡pido (5 minutos)

- **[IMPLEMENTACAO_CONCLUIDA.md](./IMPLEMENTACAO_CONCLUIDA.md)** - DocumentaÃ§Ã£o tÃ©cnica completa4. **Atualizar documentaÃ§Ã£o em `src/routes/index.js`**

- **[SUGESTOES_MELHORIA.md](./SUGESTOES_MELHORIA.md)** - DecisÃµes de arquitetura

- **[RESUMO_EXECUTIVO.md](./RESUMO_EXECUTIVO.md)** - Resumo executivo da implementaÃ§Ã£o5. **Testar:**

- **[src/funcionalidades/_TEMPLATE/README.md](./src/funcionalidades/_TEMPLATE/README.md)** - Como criar novas funcionalidades```bash

npm start

---

curl -X POST http://localhost:3000/minha-rota \

## ğŸ¯ Roadmap  -H "Content-Type: application/json" \

  -d '{"parametro": "valor"}'

### âœ… Implementado (v2.0)```



- [x] Auto-carregamento de rotas### Scripts disponÃ­veis

- [x] BaseController padronizado

- [x] Sistema de validaÃ§Ã£o centralizado```bash

- [x] Tratamento global de errosnpm start       # Inicia o servidor

- [x] Dashboard de documentaÃ§Ã£onpm test        # (adicionar testes no futuro)

- [x] Sistema de templates```

- [x] Logs de acesso

- [x] Filtro de IP### DependÃªncias



### ğŸš§ Em Planejamento (v3.0)**ProduÃ§Ã£o:**

- `express@5.1.0` - Framework web

- [ ] Testes automatizados (Jest)- `cors` - Cross-Origin Resource Sharing

- [ ] OpenAPI/Swagger docs- `dotenv` - VariÃ¡veis de ambiente

- [ ] Rate limiting avanÃ§ado- `multer` - Upload de arquivos

- [ ] Cache com Redis- `pdf-parse@1.1.1` - ExtraÃ§Ã£o de texto de PDF

- [ ] WebSockets

- [ ] AutenticaÃ§Ã£o JWT**Desenvolvimento:**

- [ ] Docker containerization- Node.js >= 22.18.0

- [ ] CI/CD pipeline

---

---

## ğŸ“ DocumentaÃ§Ã£o de Funcionalidades

## ğŸ¤ Contribuindo

Cada funcionalidade possui sua prÃ³pria documentaÃ§Ã£o detalhada:

ContribuiÃ§Ãµes sÃ£o bem-vindas! Siga os passos:

- [ValidaÃ§Ã£o de CPF](src/funcionalidades/validacao/README.md)

1. **Fork** o projeto- [Leitura de PDF](src/funcionalidades/pdf/README.md)

2. **Crie uma branch** para sua feature (`git checkout -b feature/MinhaFeature`)- [Calculadora](src/funcionalidades/calculo/README.md)

3. **Commit suas mudanÃ§as** (`git commit -m 'feat: Adiciona MinhaFeature'`)- [Extras (Futuras)](src/funcionalidades/extras/README.md)

4. **Push para a branch** (`git push origin feature/MinhaFeature`)

5. **Abra um Pull Request**---



### PadrÃ£o de Commits## ğŸ› Troubleshooting



Seguimos [Conventional Commits](https://www.conventionalcommits.org/):### Erro: "Cannot find module"

```bash

- `feat:` Nova funcionalidadenpm install

- `fix:` CorreÃ§Ã£o de bugpm2 restart api

- `docs:` DocumentaÃ§Ã£o```

- `refactor:` RefatoraÃ§Ã£o de cÃ³digo

- `test:` Testes### Erro: Porta 3000 jÃ¡ em uso

- `chore:` Tarefas de manutenÃ§Ã£o```bash

# Encontrar processo na porta 3000

---lsof -ti:3000



## ğŸ“„ LicenÃ§a# Matar processo

lsof -ti:3000 | xargs kill -9

Este projeto estÃ¡ sob a licenÃ§a **MIT**. Veja o arquivo [LICENSE](LICENSE) para mais detalhes.

# Ou mudar a porta no .env

---PORT=3001

```

## ğŸ‘¨â€ğŸ’» Autor

### Erro 403 mesmo com IP autorizado

**Gilberto Romanhole**

1. Verifique o IP detectado nos logs:

- GitHub: [@gilbertoromanholew](https://github.com/gilbertoromanholew)```bash

- RepositÃ³rio: [github.com/gilbertoromanholew/api](https://github.com/gilbertoromanholew/api)pm2 logs api

```

---

2. Se estiver usando Cloudflare:

## ğŸ“ Suporte   - Acesse o painel do Cloudflare

   - VÃ¡ em DNS

- ğŸ“– Veja a [DocumentaÃ§Ã£o Completa](./GUIA_RAPIDO.md)   - Desabilite o proxy (nuvem laranja â†’ cinza)

- ğŸ› Reporte bugs via [Issues](https://github.com/gilbertoromanholew/api/issues)

- ğŸ’¬ Tire dÃºvidas nas [Discussions](https://github.com/gilbertoromanholew/api/discussions)3. Se estiver atrÃ¡s de proxy/load balancer:

   - Verifique os headers `X-Forwarded-For` ou `X-Real-IP`

---   - Adicione o IP do proxy na lista de permitidos



## ğŸŒŸ MÃ©tricas### PDF nÃ£o estÃ¡ sendo lido



| MÃ©trica | Valor |1. Verifique o formato do arquivo (deve ser PDF vÃ¡lido)

|---------|-------|2. Verifique o tamanho (multer tem limite padrÃ£o)

| **Tempo para criar funcionalidade** | 5 minutos (70% mais rÃ¡pido) |3. Verifique se o campo do form-data Ã© `pdf`

| **Linhas de cÃ³digo por controller** | 15-20 linhas (50% menos) |

| **Tempo de configuraÃ§Ã£o** | 30 segundos (95% mais rÃ¡pido) |---

| **Cobertura de testes** | Em desenvolvimento |

## ğŸ“„ LicenÃ§a

---

Este projeto Ã© proprietÃ¡rio. Todos os direitos reservados.

## ğŸ‰ Agradecimentos

---

- [Express.js](https://expressjs.com/) - Framework web minimalista

- [Node.js](https://nodejs.org/) - Runtime JavaScript## ğŸ‘¨â€ğŸ’» Autor

- [pdf-parse](https://www.npmjs.com/package/pdf-parse) - ExtraÃ§Ã£o de texto de PDF

- [dotenv](https://www.npmjs.com/package/dotenv) - Gerenciamento de variÃ¡veis de ambiente**Gilberto Romano Holew**

- GitHub: [@gilbertoromanholew](https://github.com/gilbertoromanholew)

---- Website: https://api.samm.host



<div align="center">---



**â­ Se este projeto foi Ãºtil, considere dar uma estrela! â­**## ğŸ“ Suporte



Feito com â¤ï¸ por [Gilberto Romanhole](https://github.com/gilbertoromanholew)Para questÃµes ou problemas:

- Abra uma [issue](https://github.com/gilbertoromanholew/api/issues)

</div>- Entre em contato atravÃ©s do site


---

## ğŸ“Š Status

- **VersÃ£o:** 2.0.0
- **Status:** âœ… Online e funcional
- **Ãšltima atualizaÃ§Ã£o:** 16 de outubro de 2025
- **Node.js:** >= 22.18.0
- **Express:** 5.1.0

---

**âš¡ API desenvolvida com foco em modularidade, seguranÃ§a e escalabilidade.**
