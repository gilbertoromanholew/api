# üéØ TEMPLATE - Como Criar Nova Funcionalidade# üéØ TEMPLATE - Como Criar Nova Funcionalidade# üéØ TEMPLATE - Como Criar Nova Funcionalidade



> **‚è±Ô∏è Tempo estimado: 5 minutos**



Este template tem tudo que voc√™ precisa para criar uma nova funcionalidade na API.> **‚è±Ô∏è Tempo estimado: 5 minutos**> **‚è±Ô∏è Tempo estimado: 5 minutos**



---



## üöÄ Passo a Passo R√°pidoEste template tem tudo que voc√™ precisa para criar uma nova funcionalidade na API.Este template tem tudo que voc√™ precisa para criar uma nova funcionalidade na API.



### 1Ô∏è‚É£ Copie esta pasta



```powershell------

# Windows (PowerShell) - Na raiz do projeto

Copy-Item -Path "src/functions/_TEMPLATE" -Destination "src/functions/NOME_DA_SUA_FUNCIONALIDADE" -Recurse

```

## üöÄ Passo a Passo R√°pido## üöÄ Passo a Passo R√°pido

**Exemplo real:** Criar funcionalidade para gerar QR Code

```powershell

Copy-Item -Path "src/functions/_TEMPLATE" -Destination "src/functions/qrcode" -Recurse

```### 1Ô∏è‚É£ Copie esta pasta### 1Ô∏è‚É£ Copie esta pasta



---



### 2Ô∏è‚É£ Decida quais arquivos voc√™ precisa```powershell```powershell



| Arquivo | Quando usar | Obrigat√≥rio? |# Windows (PowerShell) - Na raiz do projeto# Windows (PowerShell) - Na raiz do projeto

|---------|-------------|--------------|

| **`*Controller.js`** | Sempre! Cont√©m a l√≥gica da sua funcionalidade | ‚úÖ **SIM** |Copy-Item -Path "src/functions/_TEMPLATE" -Destination "src/functions/NOME_DA_SUA_FUNCIONALIDADE" -RecurseCopy-Item -Path "src/functions/_TEMPLATE" -Destination "src/functions/NOME_DA_SUA_FUNCIONALIDADE" -Recurse

| **`*Routes.js`** | Sempre! Define as rotas HTTP (GET, POST, etc.) | ‚úÖ **SIM** |

| **`*Utils.js`** | S√≥ se tiver fun√ß√µes auxiliares reutiliz√°veis | ‚ùå N√£o |``````

| **`README.md`** | Opcional - documenta sua funcionalidade | ‚ùå N√£o |



---

**Exemplo real:** Criar funcionalidade para gerar QR Code**Exemplo real:** Criar funcionalidade para gerar QR Code

### 3Ô∏è‚É£ Renomeie e customize os arquivos

```powershell```powershell

#### üìÑ Arquivos OBRIGAT√ìRIOS (sempre copie):

Copy-Item -Path "src/functions/_TEMPLATE" -Destination "src/functions/qrcode" -RecurseCopy-Item -Path "src/functions/_TEMPLATE" -Destination "src/functions/qrcode" -Recurse

1. **`templateController.js`** ‚Üí **`suaController.js`**

   - Cont√©m a l√≥gica de neg√≥cio``````

   - Usa `BaseController` para respostas padronizadas

   

2. **`templateRoutes.js`** ‚Üí **`suaRoutes.js`**

   - Define as rotas (GET, POST, PUT, DELETE)------

   - Adiciona valida√ß√£o nos endpoints



#### üìÑ Arquivos OPCIONAIS (copie s√≥ se precisar):

### 2Ô∏è‚É£ Decida quais arquivos voc√™ precisa### 2Ô∏è‚É£ Decida quais arquivos voc√™ precisa

3. **`templateUtils.js`** ‚Üí **`suaUtils.js`** *(opcional)*

   - Fun√ß√µes auxiliares complexas

   - Valida√ß√µes customizadas

   - Formata√ß√µes especiais| Arquivo | Quando usar | Obrigat√≥rio? || Arquivo | Quando usar | Obrigat√≥rio? |

   

   **‚ö†Ô∏è Copie APENAS SE:**|---------|-------------|--------------||---------|-------------|--------------|

   - Tiver l√≥gica complexa reutiliz√°vel

   - Tiver c√°lculos matem√°ticos| **`*Controller.js`** | Sempre! Cont√©m a l√≥gica da sua funcionalidade | ‚úÖ **SIM** || **`*Controller.js`** | Sempre! Cont√©m a l√≥gica da sua funcionalidade | ‚úÖ **SIM** |

   - Tiver formata√ß√µes de dados

   | **`*Routes.js`** | Sempre! Define as rotas HTTP (GET, POST, etc.) | ‚úÖ **SIM** || **`*Routes.js`** | Sempre! Define as rotas HTTP (GET, POST, etc.) | ‚úÖ **SIM** |

   **‚ùå N√ÉO copie se:** Sua funcionalidade √© simples (CRUD b√°sico)

| **`*Utils.js`** | S√≥ se tiver fun√ß√µes auxiliares reutiliz√°veis | ‚ùå N√£o || **`*Utils.js`** | S√≥ se tiver fun√ß√µes auxiliares reutiliz√°veis | ‚ùå N√£o |

#### üóëÔ∏è Arquivo para DELETAR:

| **`README.md`** | Opcional - documenta sua funcionalidade | ‚ùå N√£o || **`README.md`** | Opcional - documenta sua funcionalidade | ‚ùå N√£o |

4. **`README.md`** - Delete ap√≥s ler este guia!



---

------

### 4Ô∏è‚É£ Edite o Controller



Abra `suaController.js` e implemente sua l√≥gica:

### 3Ô∏è‚É£ Renomeie e customize os arquivos### 3Ô∏è‚É£ Renomeie e customize os arquivos

```javascript

import { BaseController } from '../../core/BaseController.js';



class SuaController extends BaseController {#### üìÑ Arquivos OBRIGAT√ìRIOS (sempre copie):#### üìÑ Arquivos OBRIGAT√ìRIOS (sempre copie):

    async seuMetodo(req, res) {

        return this.execute(req, res, async (req, res) => {

            const { parametro } = req.body;

            1. **`templateController.js`** ‚Üí **`suaController.js`**1. **`templateController.js`** ‚Üí **`suaController.js`**

            // Sua l√≥gica aqui

            const resultado = `Processado: ${parametro}`;   - Cont√©m a l√≥gica de neg√≥cio   - Cont√©m a l√≥gica de neg√≥cio

            

            // Retorna sucesso   - Usa `BaseController` para respostas padronizadas   - Usa `BaseController` para respostas padronizadas

            return this.success(res, { resultado }, 'Opera√ß√£o realizada');

        });      

    }

}2. **`templateRoutes.js`** ‚Üí **`suaRoutes.js`**2. **`templateRoutes.js`** ‚Üí **`suaRoutes.js`**



export default new SuaController();   - Define as rotas (GET, POST, PUT, DELETE)   - Define as rotas (GET, POST, PUT, DELETE)

```

   - Adiciona valida√ß√£o nos endpoints   - Adiciona valida√ß√£o nos endpoints

---



### 5Ô∏è‚É£ Edite as Routes

#### üìÑ Arquivo OPCIONAL (copie s√≥ se precisar):#### üìÑ Arquivos OPCIONAIS (copie s√≥ se precisar):

Abra `suaRoutes.js` e defina suas rotas:



```javascript

import { Router } from 'express';3. **`templateUtils.js`** ‚Üí **`suaUtils.js`** *(opcional)*3. **`templateUtils.js`** ‚Üí **`suaUtils.js`** *(opcional)*

import suaController from './suaController.js';

import { validate } from '../../middlewares/validator.js';   - Fun√ß√µes auxiliares complexas   - Fun√ß√µes auxiliares complexas



const router = Router();   - Valida√ß√µes customizadas   - Valida√ß√µes customizadas



// Schema de valida√ß√£o   - Formata√ß√µes especiais   - Formata√ß√µes especiais

const schema = {

    required: ['parametro'],      

    types: { parametro: 'string' }

};   **‚ö†Ô∏è Copie APENAS SE:**   **‚ö†Ô∏è Copie APENAS SE:**



// Rota   - Tiver l√≥gica complexa reutiliz√°vel (c√°lculos, valida√ß√µes)   - Tiver l√≥gica complexa reutiliz√°vel

router.post('/sua-rota', validate(schema), (req, res) => 

    suaController.seuMetodo(req, res)   - Tiver formata√ß√µes de dados (m√°scaras, convers√µes)   - Tiver c√°lculos matem√°ticos

);

   - Tiver fun√ß√µes usadas em v√°rios lugares   - Tiver formata√ß√µes de dados

export default router;

```      



---   **‚ùå N√ÉO copie se:** Sua funcionalidade √© simples (CRUD b√°sico)   **‚ùå N√ÉO copie se:** Sua funcionalidade √© simples (CRUD b√°sico)



### 6Ô∏è‚É£ Reinicie o servidor



```powershell#### üóëÔ∏è Arquivo para DELETAR:---

npm start

```



**‚ú® Pronto! Sua funcionalidade estar√° dispon√≠vel automaticamente!**4. **`README.md`** - Delete ap√≥s ler este guia!### 4Ô∏è‚É£ Edite o Controller



---



## üìö Exemplos Pr√°ticos---Abra `suaController.js` e implemente sua l√≥gica:



### üéØ Exemplo 1: Funcionalidade SIMPLES (n√£o precisa de Utils)



**Objetivo:** Criar endpoint que ecoa uma mensagem### 4Ô∏è‚É£ Edite o Controller```javascript



**Arquivos necess√°rios:**import { BaseController } from '../../core/BaseController.js';

- ‚úÖ `echoController.js`

- ‚úÖ `echoRoutes.js`Abra `suaController.js` e implemente sua l√≥gica:

- ‚ùå ~~echoUtils.js~~ (N√ÉO precisa - l√≥gica √© simples)

class SuaController extends BaseController {

```javascript

// echoController.js```javascript    async seuMetodo(req, res) {

import { BaseController } from '../../core/BaseController.js';

import { BaseController } from '../../core/BaseController.js';        return this.execute(req, res, async (req, res) => {

class EchoController extends BaseController {

    async ecoar(req, res) {            const { parametro } = req.body;

        return this.execute(req, res, async (req, res) => {

            const { mensagem } = req.body;class SuaController extends BaseController {            

            

            // L√≥gica simples - n√£o precisa de Utils    async seuMetodo(req, res) {            // Sua l√≥gica aqui

            const resultado = {

                original: mensagem,        return this.execute(req, res, async (req, res) => {            const resultado = `Processado: ${parametro}`;

                eco: mensagem.toUpperCase(),

                tamanho: mensagem.length            const { parametro } = req.body;            

            };

                                    // Retorna sucesso

            return this.success(res, resultado, 'Eco processado');

        });            // Sua l√≥gica aqui            return this.success(res, { resultado }, 'Opera√ß√£o realizada');

    }

}            const resultado = `Processado: ${parametro}`;        });



export default new EchoController();                }

```

            // Retorna sucesso}

```javascript

// echoRoutes.js            return this.success(res, { resultado }, 'Opera√ß√£o realizada');

import { Router } from 'express';

import echoController from './echoController.js';        });export default new SuaController();

import { validate } from '../../middlewares/validator.js';

    }```

const router = Router();

}

const echoSchema = {

    required: ['mensagem'],---

    types: { mensagem: 'string' },

    length: { mensagem: { min: 1, max: 500 } }export default new SuaController();

};

```### 5Ô∏è‚É£ Edite as Routes

router.post('/echo', validate(echoSchema), (req, res) => 

    echoController.ecoar(req, res)

);

---Abra `suaRoutes.js` e defina suas rotas:

export default router;

```



**Teste:**### 5Ô∏è‚É£ Edite as Routes```javascript

```powershell

curl -X POST http://localhost:3000/echo `import { Router } from 'express';

  -H "Content-Type: application/json" `

  -d '{"mensagem":"Ol√° Mundo"}'Abra `suaRoutes.js` e defina suas rotas:import suaController from './suaController.js';

```

import { validate } from '../../middlewares/validator.js';

---

```javascript

### üéØ Exemplo 2: Funcionalidade COMPLEXA (precisa de Utils)

import { Router } from 'express';const router = Router();

**Objetivo:** Validar CPF com formata√ß√£o e c√°lculo de d√≠gitos

import suaController from './suaController.js';

**Arquivos necess√°rios:**

- ‚úÖ `cpfController.js`import { validate } from '../../middlewares/validator.js';// Schema de valida√ß√£o

- ‚úÖ `cpfRoutes.js`

- ‚úÖ `cpfUtils.js` (SIM precisa - l√≥gica complexa de valida√ß√£o)const schema = {



```javascriptconst router = Router();    required: ['parametro'],

// cpfUtils.js - Fun√ß√µes auxiliares complexas

export function removerFormatacao(cpf) {    types: { parametro: 'string' }

    return cpf.replace(/[^\d]/g, '');

}// Schema de valida√ß√£o};



export function validarDigitos(cpf) {const schema = {

    const numeros = cpf.slice(0, 9);

    const digitos = cpf.slice(9);    required: ['parametro'],// Rota

    

    // C√°lculo do primeiro d√≠gito    types: { parametro: 'string' }router.post('/sua-rota', validate(schema), (req, res) => 

    let soma = 0;

    for (let i = 0; i < 9; i++) {};    suaController.seuMetodo(req, res)

        soma += parseInt(numeros[i]) * (10 - i);

    });

    const primeiroDigito = (soma * 10) % 11 % 10;

    // Rota

    // C√°lculo do segundo d√≠gito

    soma = 0;router.post('/sua-rota', validate(schema), (req, res) => export default router;

    for (let i = 0; i < 10; i++) {

        soma += parseInt(cpf[i]) * (11 - i);    suaController.seuMetodo(req, res)```

    }

    const segundoDigito = (soma * 10) % 11 % 10;);

    

    return digitos === `${primeiroDigito}${segundoDigito}`;---

}

export default router;

export function formatarCPF(cpf) {

    return cpf.replace(/(\d{3})(\d{3})(\d{3})(\d{2})/, '$1.$2.$3-$4');```### 6Ô∏è‚É£ Reinicie o servidor

}

```



```javascript---```powershell

// cpfController.js - Usa as fun√ß√µes do Utils

import { BaseController } from '../../core/BaseController.js';npm start

import { removerFormatacao, validarDigitos, formatarCPF } from './cpfUtils.js';

### 6Ô∏è‚É£ Reinicie o servidor```

class CPFController extends BaseController {

    async validar(req, res) {

        return this.execute(req, res, async (req, res) => {

            const { cpf } = req.body;```powershell**‚ú® Pronto! Sua funcionalidade estar√° dispon√≠vel automaticamente!**

            

            // Usa as fun√ß√µes do Utilsnpm start

            const cpfLimpo = removerFormatacao(cpf);

            const valido = validarDigitos(cpfLimpo);```---

            const formatado = formatarCPF(cpfLimpo);

            

            return this.success(res, {

                cpfOriginal: cpf,**‚ú® Pronto! Sua funcionalidade estar√° dispon√≠vel automaticamente!**## üìö Exemplos Pr√°ticos

                cpfFormatado: formatado,

                valido: valido

            }, valido ? 'CPF v√°lido' : 'CPF inv√°lido');

        });---### üéØ Exemplo 1: Funcionalidade SIMPLES (n√£o precisa de Utils)

    }

}



export default new CPFController();## üìö Exemplos Pr√°ticos**Objetivo:** Criar endpoint que ecoa uma mensagem

```



---

### üéØ Exemplo 1: Funcionalidade SIMPLES (n√£o precisa de Utils)**Arquivos necess√°rios:**

## ü§î Quando Usar Utils?

- ‚úÖ `echoController.js`

### ‚úÖ **USE Utils quando tiver:**

**Objetivo:** Criar endpoint que ecoa uma mensagem- ‚úÖ `echoRoutes.js`

| Tipo de L√≥gica | Exemplo |

|----------------|---------|- ‚ùå ~~echoUtils.js~~ (N√ÉO precisa - l√≥gica √© simples)

| **C√°lculos complexos** | Valida√ß√£o de CPF, juros compostos, dist√¢ncia entre coordenadas |

| **Formata√ß√µes** | M√°scara de telefone, formata√ß√£o de moeda, datas |**Arquivos necess√°rios:**

| **Valida√ß√µes customizadas** | Regex complexos, valida√ß√£o de CNPJ, CEP |

| **Convers√µes** | XML para JSON, Base64, criptografia |- ‚úÖ `echoController.js````javascript

| **Opera√ß√µes reutiliz√°veis** | Fun√ß√£o usada em 3+ lugares |

- ‚úÖ `echoRoutes.js`// echoController.js

### ‚ùå **N√ÉO use Utils para:**

- ‚ùå ~~echoUtils.js~~ (N√ÉO precisa - l√≥gica √© simples)import { BaseController } from '../../core/BaseController.js';

| Tipo de L√≥gica | Por qu√™ |

|----------------|---------|

| **CRUD simples** | Array.filter(), .find(), .map() s√£o claros no controller |

| **Opera√ß√µes inline** | `text.toUpperCase()`, `Number(value)` s√£o autoexplicativas |```javascriptclass EchoController extends BaseController {

| **L√≥gica √∫nica** | Se usa s√≥ 1 vez, deixe no controller |

| **Queries b√°sicas** | SELECT, INSERT simples n√£o precisam de abstra√ß√£o |// echoController.js    async ecoar(req, res) {



---import { BaseController } from '../../core/BaseController.js';        return this.execute(req, res, async (req, res) => {



## üé® Padr√µes de C√≥digo            const { mensagem } = req.body;



### ‚úÖ Bom (use this.success e this.error)class EchoController extends BaseController {            

```javascript

async criarItem(req, res) {    async ecoar(req, res) {            // L√≥gica simples - n√£o precisa de Utils

    return this.execute(req, res, async (req, res) => {

        const item = await database.create(req.body);        return this.execute(req, res, async (req, res) => {            const resultado = {

        return this.success(res, item, 'Item criado', 201);

    });            const { mensagem } = req.body;                original: mensagem,

}

```                            eco: mensagem.toUpperCase(),



### ‚ùå Ruim (n√£o use res.json diretamente)            // L√≥gica simples - n√£o precisa de Utils                tamanho: mensagem.length

```javascript

async criarItem(req, res) {            const resultado = {            };

    try {

        const item = await database.create(req.body);                original: mensagem,            

        res.status(201).json({ success: true, data: item });

    } catch (error) {                eco: mensagem.toUpperCase(),            return this.success(res, resultado, 'Eco processado');

        res.status(500).json({ success: false, error: error.message });

    }                tamanho: mensagem.length        });

}

```            };    }



---            }



## üìã Checklist Final            return this.success(res, resultado, 'Eco processado');



Antes de testar, verifique:        });export default new EchoController();



- [ ] Arquivos renomeados corretamente (sem "template" no nome)    }```

- [ ] Controller estende `BaseController`

- [ ] Routes exporta `export default router`}

- [ ] Valida√ß√£o adicionada nas rotas sens√≠veis

- [ ] C√≥digo documentado com coment√°rios```javascript

- [ ] Testado com curl ou Postman

- [ ] README.md do template foi deletadoexport default new EchoController();// echoRoutes.js



---```import { Router } from 'express';



## üÜò Troubleshootingimport echoController from './echoController.js';



**Problema:** Rota n√£o encontrada (404)```javascriptimport { validate } from '../../middlewares/validator.js';

- ‚úÖ Verifique se o arquivo termina com `Routes.js`

- ‚úÖ Verifique se tem `export default router` no final// echoRoutes.js

- ‚úÖ Reinicie o servidor

import { Router } from 'express';const router = Router();

**Problema:** Erro de valida√ß√£o

- ‚úÖ Verifique o schema no Routesimport echoController from './echoController.js';

- ‚úÖ Confira se os campos obrigat√≥rios est√£o no body

- ‚úÖ Veja os tipos de dados (string, number, etc.)import { validate } from '../../middlewares/validator.js';const echoSchema = {



**Problema:** Erro interno (500)    required: ['mensagem'],

- ‚úÖ Veja o console do servidor para stack trace

- ‚úÖ Verifique imports dos m√≥dulosconst router = Router();    types: { mensagem: 'string' },

- ‚úÖ Confira se BaseController foi importado corretamente

    length: { mensagem: { min: 1, max: 500 } }

---

const echoSchema = {};

## üìñ Refer√™ncias √öteis

    required: ['mensagem'],

- **Exemplos reais:** Veja `src/functions/exemplo/` e `src/functions/pdf/`

- **BaseController:** `src/core/BaseController.js`    types: { mensagem: 'string' },router.post('/echo', validate(echoSchema), (req, res) => 

- **Validator:** `src/middlewares/validator.js`

- **Documenta√ß√£o Express:** [expressjs.com](https://expressjs.com/)    length: { mensagem: { min: 1, max: 500 } }    echoController.ecoar(req, res)



---};);



**üéâ Boa sorte com sua nova funcionalidade!**



*D√∫vidas? Abra uma issue no GitHub ou consulte os exemplos existentes.*router.post('/echo', validate(echoSchema), (req, res) => export default router;


    echoController.ecoar(req, res)```

);

**Teste:**

export default router;```powershell

```curl -X POST http://localhost:3000/echo `

  -H "Content-Type: application/json" `

**Teste:**  -d '{"mensagem":"Ol√° Mundo"}'

```powershell```

curl -X POST http://localhost:3000/echo `

  -H "Content-Type: application/json" `---

  -d '{"mensagem":"Ol√° Mundo"}'

```### üéØ Exemplo 2: Funcionalidade COMPLEXA (precisa de Utils)



---**Objetivo:** Validar CPF com formata√ß√£o e c√°lculo de d√≠gitos



### üéØ Exemplo 2: Funcionalidade COMPLEXA (precisa de Utils)**Arquivos necess√°rios:**

- ‚úÖ `cpfController.js`

**Objetivo:** Validar CPF com formata√ß√£o e c√°lculo de d√≠gitos- ‚úÖ `cpfRoutes.js`

- ‚úÖ `cpfUtils.js` (SIM precisa - l√≥gica complexa de valida√ß√£o)

**Arquivos necess√°rios:**

- ‚úÖ `cpfController.js````javascript

- ‚úÖ `cpfRoutes.js`// cpfUtils.js - Fun√ß√µes auxiliares complexas

- ‚úÖ `cpfUtils.js` (SIM precisa - l√≥gica complexa de valida√ß√£o)export function removerFormatacao(cpf) {

    return cpf.replace(/[^\d]/g, '');

```javascript}

// cpfUtils.js - Fun√ß√µes auxiliares complexas

export function removerFormatacao(cpf) {export function validarDigitos(cpf) {

    return cpf.replace(/[^\d]/g, '');    const numeros = cpf.slice(0, 9);

}    const digitos = cpf.slice(9);

    

export function validarDigitos(cpf) {    // C√°lculo do primeiro d√≠gito

    const numeros = cpf.slice(0, 9);    let soma = 0;

    const digitos = cpf.slice(9);    for (let i = 0; i < 9; i++) {

            soma += parseInt(numeros[i]) * (10 - i);

    // C√°lculo do primeiro d√≠gito    }

    let soma = 0;    const primeiroDigito = (soma * 10) % 11 % 10;

    for (let i = 0; i < 9; i++) {    

        soma += parseInt(numeros[i]) * (10 - i);    // C√°lculo do segundo d√≠gito

    }    soma = 0;

    const primeiroDigito = (soma * 10) % 11 % 10;    for (let i = 0; i < 10; i++) {

            soma += parseInt(cpf[i]) * (11 - i);

    // C√°lculo do segundo d√≠gito    }

    soma = 0;    const segundoDigito = (soma * 10) % 11 % 10;

    for (let i = 0; i < 10; i++) {    

        soma += parseInt(cpf[i]) * (11 - i);    return digitos === `${primeiroDigito}${segundoDigito}`;

    }}

    const segundoDigito = (soma * 10) % 11 % 10;

    export function formatarCPF(cpf) {

    return digitos === `${primeiroDigito}${segundoDigito}`;    return cpf.replace(/(\d{3})(\d{3})(\d{3})(\d{2})/, '$1.$2.$3-$4');

}}

```

export function formatarCPF(cpf) {

    return cpf.replace(/(\d{3})(\d{3})(\d{3})(\d{2})/, '$1.$2.$3-$4');```javascript

}// cpfController.js - Usa as fun√ß√µes do Utils

```import { BaseController } from '../../core/BaseController.js';

import { removerFormatacao, validarDigitos, formatarCPF } from './cpfUtils.js';

```javascript

// cpfController.js - Usa as fun√ß√µes do Utilsclass CPFController extends BaseController {

import { BaseController } from '../../core/BaseController.js';    async validar(req, res) {

import { removerFormatacao, validarDigitos, formatarCPF } from './cpfUtils.js';        return this.execute(req, res, async (req, res) => {

            const { cpf } = req.body;

class CPFController extends BaseController {            

    async validar(req, res) {            // Usa as fun√ß√µes do Utils

        return this.execute(req, res, async (req, res) => {            const cpfLimpo = removerFormatacao(cpf);

            const { cpf } = req.body;            const valido = validarDigitos(cpfLimpo);

                        const formatado = formatarCPF(cpfLimpo);

            // Usa as fun√ß√µes do Utils            

            const cpfLimpo = removerFormatacao(cpf);            return this.success(res, {

            const valido = validarDigitos(cpfLimpo);                cpfOriginal: cpf,

            const formatado = formatarCPF(cpfLimpo);                cpfFormatado: formatado,

                            valido: valido

            return this.success(res, {            }, valido ? 'CPF v√°lido' : 'CPF inv√°lido');

                cpfOriginal: cpf,        });

                cpfFormatado: formatado,    }

                valido: valido}

            }, valido ? 'CPF v√°lido' : 'CPF inv√°lido');

        });export default new CPFController();

    }```

}

---

export default new CPFController();

```## ü§î Quando Usar Utils?



---### ‚úÖ **USE Utils quando tiver:**



## ü§î Quando Usar Utils?| Tipo de L√≥gica | Exemplo |

|----------------|---------|

### ‚úÖ **USE Utils quando tiver:**| **C√°lculos complexos** | Valida√ß√£o de CPF, juros compostos, dist√¢ncia entre coordenadas |

| **Formata√ß√µes** | M√°scara de telefone, formata√ß√£o de moeda, datas |

| Tipo de L√≥gica | Exemplo || **Valida√ß√µes customizadas** | Regex complexos, valida√ß√£o de CNPJ, CEP |

|----------------|---------|| **Convers√µes** | XML para JSON, Base64, criptografia |

| **C√°lculos complexos** | Valida√ß√£o de CPF, juros compostos, dist√¢ncia entre coordenadas || **Opera√ß√µes reutiliz√°veis** | Fun√ß√£o usada em 3+ lugares |

| **Formata√ß√µes** | M√°scara de telefone, formata√ß√£o de moeda, datas |

| **Valida√ß√µes customizadas** | Regex complexos, valida√ß√£o de CNPJ, CEP |### ‚ùå **N√ÉO use Utils para:**

| **Convers√µes** | XML para JSON, Base64, criptografia |

| **Opera√ß√µes reutiliz√°veis** | Fun√ß√£o usada em 3+ lugares || Tipo de L√≥gica | Por qu√™ |

|----------------|---------|

### ‚ùå **N√ÉO use Utils para:**| **CRUD simples** | Array.filter(), .find(), .map() s√£o claros no controller |

| **Opera√ß√µes inline** | `text.toUpperCase()`, `Number(value)` s√£o autoexplicativas |

| Tipo de L√≥gica | Por qu√™ || **L√≥gica √∫nica** | Se usa s√≥ 1 vez, deixe no controller |

|----------------|---------|| **Queries b√°sicas** | SELECT, INSERT simples n√£o precisam de abstra√ß√£o |

| **CRUD simples** | Array.filter(), .find(), .map() s√£o claros no controller |

| **Opera√ß√µes inline** | `text.toUpperCase()`, `Number(value)` s√£o autoexplicativas |---

| **L√≥gica √∫nica** | Se usa s√≥ 1 vez, deixe no controller |

| **Queries b√°sicas** | SELECT, INSERT simples n√£o precisam de abstra√ß√£o |## üé® Padr√µes de C√≥digo



---### ‚úÖ Bom (use this.success e this.error)

```javascript

## üé® Padr√µes de C√≥digoasync criarItem(req, res) {

    return this.execute(req, res, async (req, res) => {

### ‚úÖ Bom (use this.success e this.error)        const item = await database.create(req.body);

```javascript        return this.success(res, item, 'Item criado', 201);

async criarItem(req, res) {    });

    return this.execute(req, res, async (req, res) => {}

        const item = await database.create(req.body);```

        return this.success(res, item, 'Item criado', 201);

    });### ‚ùå Ruim (n√£o use res.json diretamente)

}```javascript

```async criarItem(req, res) {

    try {

### ‚ùå Ruim (n√£o use res.json diretamente)        const item = await database.create(req.body);

```javascript        res.status(201).json({ success: true, data: item });

async criarItem(req, res) {    } catch (error) {

    try {        res.status(500).json({ success: false, error: error.message });

        const item = await database.create(req.body);    }

        res.status(201).json({ success: true, data: item });}

    } catch (error) {```

        res.status(500).json({ success: false, error: error.message });

    }---

}

```## üìã Checklist Final



---Antes de testar, verifique:



## üìã Checklist Final- [ ] Arquivos renomeados corretamente (sem "template" no nome)

- [ ] Controller estende `BaseController`

Antes de testar, verifique:- [ ] Routes exporta `export default router`

- [ ] Valida√ß√£o adicionada nas rotas sens√≠veis

- [ ] Arquivos renomeados corretamente (sem "template" no nome)- [ ] C√≥digo documentado com coment√°rios

- [ ] README.md do template foi deletado- [ ] Testado com curl ou Postman

- [ ] Controller estende `BaseController`

- [ ] Routes exporta `export default router`---

- [ ] Valida√ß√£o adicionada nas rotas sens√≠veis

- [ ] C√≥digo documentado com coment√°rios## üÜò Troubleshooting

- [ ] Testado com curl ou Postman

**Problema:** Rota n√£o encontrada (404)

---- ‚úÖ Verifique se o arquivo termina com `Routes.js`

- ‚úÖ Verifique se tem `export default router` no final

## üÜò Troubleshooting- ‚úÖ Reinicie o servidor



**Problema:** Rota n√£o encontrada (404)**Problema:** Erro de valida√ß√£o

- ‚úÖ Verifique se o arquivo termina com `Routes.js`- ‚úÖ Verifique o schema no Routes

- ‚úÖ Verifique se tem `export default router` no final- ‚úÖ Confira se os campos obrigat√≥rios est√£o no body

- ‚úÖ Reinicie o servidor- ‚úÖ Veja os tipos de dados (string, number, etc.)



**Problema:** Erro de valida√ß√£o**Problema:** Erro interno (500)

- ‚úÖ Verifique o schema no Routes- ‚úÖ Veja o console do servidor para stack trace

- ‚úÖ Confira se os campos obrigat√≥rios est√£o no body- ‚úÖ Verifique imports dos m√≥dulos

- ‚úÖ Veja os tipos de dados (string, number, etc.)- ‚úÖ Confira se BaseController foi importado corretamente



**Problema:** Erro interno (500)---

- ‚úÖ Veja o console do servidor para stack trace

- ‚úÖ Verifique imports dos m√≥dulos## üìñ Refer√™ncias √öteis

- ‚úÖ Confira se BaseController foi importado corretamente

- **Exemplos reais:** Veja `src/functions/exemplo/` e `src/functions/pdf/`

---- **BaseController:** `src/core/BaseController.js`

- **Validator:** `src/middlewares/validator.js`

## üìñ Refer√™ncias √öteis- **Documenta√ß√£o Express:** [expressjs.com](https://expressjs.com/)



- **Exemplos reais:** Veja `src/functions/exemplo/` e `src/functions/pdf/`---

- **BaseController:** `src/core/BaseController.js`

- **Validator:** `src/middlewares/validator.js`**üéâ Boa sorte com sua nova funcionalidade!**

- **Documenta√ß√£o Express:** [expressjs.com](https://expressjs.com/)

*D√∫vidas? Abra uma issue no GitHub ou consulte os exemplos existentes.*

---

---

**üéâ Boa sorte com sua nova funcionalidade!**

## üìù Conven√ß√µes e Boas Pr√°ticas

*D√∫vidas? Abra uma issue no GitHub ou consulte os exemplos existentes.*

### ‚úÖ DO (Fa√ßa):
- Use a classe `BaseController` para respostas padronizadas
- Adicione valida√ß√£o com `validate(schema)` nas rotas
- Use `async/await` para opera√ß√µes ass√≠ncronas
- Documente seu c√≥digo com coment√°rios JSDoc
- Mantenha controllers enxutos (l√≥gica no Utils)
- Use nomes descritivos para fun√ß√µes e vari√°veis

### ‚ùå DON'T (N√£o fa√ßa):
- N√£o fa√ßa tratamento de erro manual (BaseController faz isso)
- N√£o valide par√¢metros no controller (use validator middleware)
- N√£o acesse `req.body` sem valida√ß√£o
- N√£o retorne `res.status().json()` manualmente (use `this.success()` / `this.error()`)
- N√£o repita c√≥digo (crie fun√ß√µes auxiliares no Utils)

---

## üéì Exemplos

### Exemplo 1: Funcionalidade Simples (Echo)
```javascript
// echoController.js
import { BaseController } from '../../core/BaseController.js';

class EchoController extends BaseController {
    async echo(req, res) {
        return this.execute(req, res, async (req, res) => {
            const { message } = req.body;
            this.success(res, { echo: message }, 'Mensagem ecoada');
        });
    }
}

export const echoController = new EchoController();
export const echo = (req, res) => echoController.echo(req, res);
```

```javascript
// echoRoutes.js
import express from 'express';
import { echo } from './echoController.js';
import { validate } from '../../middlewares/validator.js';

const router = express.Router();

const echoSchema = {
    required: ['message'],
    types: { message: 'string' }
};

router.post('/echo', validate(echoSchema), echo);

export default router;
```

### Exemplo 2: Funcionalidade com Depend√™ncia Externa
```javascript
// qrcodeController.js
import { BaseController } from '../../core/BaseController.js';
import QRCode from 'qrcode';

class QRCodeController extends BaseController {
    async generate(req, res) {
        return this.execute(req, res, async (req, res) => {
            const { text } = req.body;
            const qrCode = await QRCode.toDataURL(text);
            
            this.success(res, { qrCode }, 'QR Code gerado');
        });
    }
}

export const qrcodeController = new QRCodeController();
export const generate = (req, res) => qrcodeController.generate(req, res);
```

---

## üîß Schemas de Valida√ß√£o

### Estrutura do Schema:
```javascript
const schema = {
    // Campos obrigat√≥rios
    required: ['campo1', 'campo2'],
    
    // Tipos de dados
    types: {
        campo1: 'string',  // 'string', 'number', 'boolean', 'array'
        campo2: 'number'
    },
    
    // Valores permitidos (enum)
    enum: {
        campo1: ['valor1', 'valor2', 'valor3']
    },
    
    // Tamanho min/max
    length: {
        campo1: { min: 3, max: 100 }
    }
};
```

---

## üöÄ Pr√≥ximos Passos

1. **Instale depend√™ncias** (se necess√°rio):
   ```bash
   npm install nome-da-lib
   ```

2. **Teste sua funcionalidade**:
   ```bash
   curl -X POST http://localhost:3000/sua-rota \
     -H "Content-Type: application/json" \
     -d '{"parametro": "valor"}'
   ```

3. **Documente no README principal** da API

4. **Adicione testes** (futuro)

---

## üìö Refer√™ncias

- [Express.js Docs](https://expressjs.com/)
- [JavaScript Promises](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise)
- [REST API Best Practices](https://restfulapi.net/)

---

**D√∫vidas? Consulte os controllers existentes em:**
- `src/funcionalidades/validacao/`
- `src/funcionalidades/pdf/`
- `src/funcionalidades/calculo/`
