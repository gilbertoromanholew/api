# üöÄ API Modular - Node.js & Express# üöÄ API Modular - Node.js & Express# ÔøΩ API Multi-Funcional



[![Node.js](https://img.shields.io/badge/Node.js-22.18.0+-339933?logo=node.js&logoColor=white)](https://nodejs.org/)

[![Express](https://img.shields.io/badge/Express-5.1.0-000000?logo=express&logoColor=white)](https://expressjs.com/)

[![License](https://img.shields.io/badge/License-MIT-blue.svg)](LICENSE)[![Node.js](https://img.shields.io/badge/Node.js-22.18.0+-339933?logo=node.js&logoColor=white)](https://nodejs.org/)> API REST modular com valida√ß√£o, processamento de PDF e c√°lculos matem√°ticos

[![Status](https://img.shields.io/badge/Status-Online-success.svg)](https://api.samm.host)

[![Express](https://img.shields.io/badge/Express-5.1.0-000000?logo=express&logoColor=white)](https://expressjs.com/)

> **API REST modular com auto-descoberta de rotas, valida√ß√£o centralizada e sistema de templates para desenvolvimento r√°pido.**

[![License](https://img.shields.io/badge/License-MIT-blue.svg)](LICENSE)[![Node.js](https://img.shields.io/badge/Node.js-22.18.0+-green.svg)](https://nodejs.org/)

**üåê URL de Produ√ß√£o:** https://api.samm.host

[![Made with ‚ù§Ô∏è](https://img.shields.io/badge/Made%20with-‚ù§%20Ô∏è-red.svg)](https://github.com/gilbertoromanholew/api)[![Express](https://img.shields.io/badge/Express-5.1.0-blue.svg)](https://expressjs.com/)

---

[![Status](https://img.shields.io/badge/Status-Online-success.svg)](https://api.samm.host)

## üìã √çndice

> **API moderna e extens√≠vel com arquitetura modular, auto-carregamento de rotas e sistema de templates para desenvolvimento r√°pido.**

- [Caracter√≠sticas](#-caracter√≠sticas)

- [Instala√ß√£o](#-instala√ß√£o)---

- [In√≠cio R√°pido](#-in√≠cio-r√°pido)

- [Endpoints Dispon√≠veis](#-endpoints-dispon√≠veis)---

- [Arquitetura](#-arquitetura)

- [Como Criar Nova Funcionalidade](#-como-criar-nova-funcionalidade)## üìã √çndice

- [Configura√ß√£o](#-configura√ß√£o)

- [Seguran√ßa](#-seguran√ßa)## ‚ú® Caracter√≠sticas

- [Deploy](#-deploy)

- [Estrutura do Projeto](#-estrutura-do-projeto)- [Vis√£o Geral](#-vis√£o-geral)

- [Troubleshooting](#-troubleshooting)

- [Contribuindo](#-contribuindo)- üéØ **Arquitetura Modular** - Funcionalidades independentes e auto-descobertas- [Funcionalidades](#-funcionalidades)

- [Licen√ßa](#-licen√ßa)

- ‚ö° **Auto-carregamento** - Rotas descobertas e registradas automaticamente- [Instala√ß√£o](#-instala√ß√£o)

---

- üõ°Ô∏è **Valida√ß√£o Centralizada** - Sistema de schemas reutiliz√°veis- [Configura√ß√£o](#-configura√ß√£o)

## ‚ú® Caracter√≠sticas

- üé® **Respostas Padronizadas** - BaseController para consist√™ncia- [Uso](#-uso)

- üéØ **Arquitetura Modular** - Funcionalidades independentes e auto-descobertas

- ‚ö° **Auto-carregamento de Rotas** - Descobre e registra rotas automaticamente- üìù **Documenta√ß√£o Autom√°tica** - Dashboard web com lista de funcionalidades- [Estrutura](#-estrutura-do-projeto)

- üõ°Ô∏è **Valida√ß√£o Centralizada** - Sistema de schemas reutiliz√°veis

- üé® **Respostas Padronizadas** - BaseController para consist√™ncia- üîí **Controle de Acesso** - Filtro de IP e logs de acessos- [Seguran√ßa](#-seguran√ßa)

- üìù **Documenta√ß√£o Autom√°tica** - Dashboard web interativo

- üîí **Controle de Acesso por IP** - Whitelist de IPs autorizados- üö¶ **Tratamento de Erros** - Global error handler e 404 customizado- [Deploy](#-deploy)

- üö¶ **Tratamento Global de Erros** - Error handler centralizado

- üì¶ **Sistema de Templates** - Crie novas funcionalidades em 5 minutos- üì¶ **Sistema de Templates** - Crie novas funcionalidades em 5 minutos- [Desenvolvimento](#-desenvolvimento)

- üåê **CORS Habilitado** - Pronto para APIs p√∫blicas

- üìä **Dashboard de Logs** - Visualize acessos em tempo real- üåê **CORS Habilitado** - Pronto para APIs p√∫blicas



---- üìä **Dashboard de Logs** - Visualize acessos em tempo real---



## üîß Instala√ß√£o



### Pr√©-requisitos---## üéØ Vis√£o Geral



- **Node.js** >= 22.18.0

- **npm** >= 10.x

## üìã √çndiceAPI REST modular constru√≠da com Node.js e Express, oferecendo m√∫ltiplas funcionalidades:

### Passos

- ‚úÖ Valida√ß√£o de documentos (CPF)

1. **Clone o reposit√≥rio:**

```bash- [Instala√ß√£o](#-instala√ß√£o)- üìÑ Extra√ß√£o de texto de PDFs

git clone https://github.com/gilbertoromanholew/api.git

cd api- [In√≠cio R√°pido](#-in√≠cio-r√°pido)- üßÆ Opera√ß√µes matem√°ticas

```

- [Arquitetura](#-arquitetura)- üîí Filtro de IP para seguran√ßa

2. **Instale as depend√™ncias:**

```bash- [Endpoints Dispon√≠veis](#-endpoints-dispon√≠veis)- üìö Documenta√ß√£o interativa

npm install

```- [Como Criar Nova Funcionalidade](#-como-criar-nova-funcionalidade)



3. **Configure as vari√°veis de ambiente:**- [Configura√ß√£o](#-configura√ß√£o)**URL de Produ√ß√£o**: https://api.samm.host

```bash

cp .env.example .env- [Exemplos de Uso](#-exemplos-de-uso)

# Edite o arquivo .env conforme necess√°rio

```- [Estrutura do Projeto](#-estrutura-do-projeto)---



4. **Inicie o servidor:**- [Documenta√ß√£o Adicional](#-documenta√ß√£o-adicional)

```bash

npm start- [Contribuindo](#-contribuindo)## ‚ö° Funcionalidades

```

- [Licen√ßa](#-licen√ßa)

5. **Acesse a API:**

```### 1. üìö Documenta√ß√£o da API

http://localhost:3000

```---



---#### `GET /`



## üöÄ In√≠cio R√°pido## üîß Instala√ß√£oRetorna documenta√ß√£o completa em JSON com todos os endpoints, par√¢metros e exemplos.



### Testar a Documenta√ß√£o



```bash### Pr√©-requisitos```bash

# Ver documenta√ß√£o JSON

curl http://localhost:3000/curl https://api.samm.host/



# Acessar documenta√ß√£o HTML interativa- **Node.js** >= 22.18.0```

curl http://localhost:3000/docs

```- **npm** ou **yarn**



### Testar Endpoints#### `GET /docs`



```bash### Clonar e InstalarP√°gina HTML interativa com a documenta√ß√£o visual.

# Validar CPF

curl -X POST http://localhost:3000/validate-cpf \

  -H "Content-Type: application/json" \

  -d '{"cpf": "12345678901"}'```bash```bash



# Fazer c√°lculo# Clonar reposit√≥rio# Acesse no navegador:

curl -X POST http://localhost:3000/calcular \

  -H "Content-Type: application/json" \git clone https://github.com/gilbertoromanholew/api.githttps://api.samm.host/docs

  -d '{"operacao": "somar", "a": 10, "b": 5}'

cd api```

# Extrair texto de PDF

curl -X POST http://localhost:3000/read-pdf \

  -F "pdf=@documento.pdf"

```# Instalar depend√™ncias---



---npm install



## üì° Endpoints Dispon√≠veis### 2. ‚úÖ Valida√ß√£o de CPF



### Documenta√ß√£o e Sistema# Configurar vari√°veis de ambiente



| M√©todo | Endpoint | Descri√ß√£o |cp .env.example .env#### `POST /validate-cpf`

|--------|----------|-----------|

| `GET` | `/` | Documenta√ß√£o da API em JSON |# Edite o arquivo .env conforme necess√°rio

| `GET` | `/docs` | Documenta√ß√£o HTML interativa |

| `GET` | `/logs` | Dashboard de logs em tempo real |Valida CPFs brasileiros usando o algoritmo oficial.

| `GET` | `/api/logs` | API de logs (JSON) |

| `GET` | `/api/logs/stats` | Estat√≠sticas de acesso |# Iniciar servidor

| `GET` | `/api/functions` | Lista de funcionalidades dispon√≠veis |

npm start**Requisi√ß√£o:**

### Funcionalidades

``````bash

#### 1. ‚úÖ Valida√ß√£o de CPF

curl -X POST https://api.samm.host/validate-cpf \

**POST `/validate-cpf`**

O servidor estar√° rodando em **http://localhost:3000** üéâ  -H "Content-Type: application/json" \

Valida CPFs brasileiros usando o algoritmo oficial.

  -d '{"cpf": "12345678901"}'

**Requisi√ß√£o:**

```json---```

{

  "cpf": "12345678901"

}

```## üöÄ In√≠cio R√°pido**Resposta de Sucesso:**



**Resposta:**```json

```json

{### Testar a API{

  "success": true,

  "valido": true,  "valido": true,

  "cpf": "123.456.789-01",

  "mensagem": "CPF v√°lido"```bash  "cpf": "123.456.789-01",

}

```# Ver informa√ß√µes da API  "mensagem": "CPF v√°lido"



---curl http://localhost:3000/}



#### 2. üßÆ Calculadora```



**POST `/calcular`**# Acessar documenta√ß√£o HTML



Realiza opera√ß√µes matem√°ticas.curl http://localhost:3000/docs**Resposta de Erro:**



**Opera√ß√µes dispon√≠veis:**```json

- `somar` - Adi√ß√£o

- `subtrair` - Subtra√ß√£o# Listar usu√°rios exemplo{

- `multiplicar` - Multiplica√ß√£o

- `dividir` - Divis√£ocurl http://localhost:3000/usuarios  "valido": false,

- `porcentagem` - C√°lculo percentual

  "cpf": "12345678901",

**Requisi√ß√£o:**

```json# Criar novo usu√°rio  "mensagem": "CPF inv√°lido"

{

  "operacao": "somar",curl -X POST http://localhost:3000/usuarios \}

  "a": 10,

  "b": 5  -H "Content-Type: application/json" \```

}

```  -d '{"nome":"Jo√£o Silva","email":"joao@exemplo.com","idade":30}'



**Resposta:**---

```json

{# Buscar usu√°rio por ID

  "success": true,

  "operacao": "somar",curl http://localhost:3000/usuarios/1### 3. üìÑ Leitura de PDF

  "a": 10,

  "b": 5,

  "resultado": 15

}# Ver estat√≠sticas#### `POST /read-pdf`

```

curl http://localhost:3000/usuarios/estatisticas

---

Extrai texto de arquivos PDF.

#### 3. üìÑ Leitura de PDF

# Ler PDF

**POST `/read-pdf`**

curl -X POST http://localhost:3000/read-pdf \**Requisi√ß√£o:**

Extrai texto de arquivos PDF.

  -F "pdf=@caminho/para/arquivo.pdf"```bash

**Requisi√ß√£o:**

```bash```curl -X POST https://api.samm.host/read-pdf \

curl -X POST http://localhost:3000/read-pdf \

  -F "pdf=@documento.pdf"  -F "pdf=@documento.pdf"

```

---```

**Resposta:**

```json

{

  "success": true,## üèóÔ∏è Arquitetura**Resposta:**

  "texto": "Conte√∫do extra√≠do do PDF...",

  "paginas": 5,```json

  "info": {

    "titulo": "Documento",### Vis√£o Geral{

    "autor": "Autor"

  }  "success": true,

}

```A API utiliza uma **arquitetura modular** onde cada funcionalidade √© auto-contida e descoberta automaticamente.  "texto": "Conte√∫do extra√≠do do PDF...",



---  "paginas": 5,



## üèóÔ∏è Arquitetura```  "info": {



### Vis√£o Geralsrc/    "titulo": "Documento",



A API utiliza uma **arquitetura modular** onde cada funcionalidade √© auto-contida e descoberta automaticamente.‚îú‚îÄ‚îÄ core/    "autor": "Autor"



```‚îÇ   ‚îú‚îÄ‚îÄ BaseController.js      # Classe base para controllers  }

src/

‚îú‚îÄ‚îÄ core/‚îÇ   ‚îî‚îÄ‚îÄ routeLoader.js          # Auto-carregador de rotas}

‚îÇ   ‚îú‚îÄ‚îÄ BaseController.js      # Classe base para controllers

‚îÇ   ‚îî‚îÄ‚îÄ routeLoader.js          # Auto-carregador de rotas‚îú‚îÄ‚îÄ middlewares/```

‚îú‚îÄ‚îÄ middlewares/

‚îÇ   ‚îú‚îÄ‚îÄ validator.js            # Valida√ß√£o centralizada‚îÇ   ‚îú‚îÄ‚îÄ validator.js            # Valida√ß√£o centralizada

‚îÇ   ‚îú‚îÄ‚îÄ errorHandler.js         # Tratamento global de erros

‚îÇ   ‚îî‚îÄ‚îÄ ipFilter.js             # Controle de acesso por IP‚îÇ   ‚îú‚îÄ‚îÄ errorHandler.js         # Tratamento global de erros---

‚îú‚îÄ‚îÄ functions/

‚îÇ   ‚îú‚îÄ‚îÄ _TEMPLATE/              # Template para novas features‚îÇ   ‚îî‚îÄ‚îÄ ipFilter.js             # Controle de acesso por IP

‚îÇ   ‚îú‚îÄ‚îÄ exemplo/                # Exemplo de CRUD

‚îÇ   ‚îî‚îÄ‚îÄ pdf/                    # Leitura de PDF‚îú‚îÄ‚îÄ funcionalidades/### 4. üßÆ Calculadora

‚îú‚îÄ‚îÄ config/

‚îÇ   ‚îú‚îÄ‚îÄ index.js                # Configura√ß√µes centralizadas‚îÇ   ‚îú‚îÄ‚îÄ _TEMPLATE/              # Template para novas features

‚îÇ   ‚îî‚îÄ‚îÄ allowedIPs.js           # IPs autorizados

‚îú‚îÄ‚îÄ routes/‚îÇ   ‚îú‚îÄ‚îÄ exemplo/                # CRUD de usu√°rios (exemplo)#### `POST /calcular`

‚îÇ   ‚îú‚îÄ‚îÄ docs.js                 # Documenta√ß√£o HTML

‚îÇ   ‚îú‚îÄ‚îÄ logsDashboard.js        # Dashboard de logs‚îÇ   ‚îî‚îÄ‚îÄ pdf/                    # Leitura de PDF

‚îÇ   ‚îî‚îÄ‚îÄ logsRoutes.js           # API de logs

‚îî‚îÄ‚îÄ utils/‚îú‚îÄ‚îÄ config/Realiza opera√ß√µes matem√°ticas.

    ‚îú‚îÄ‚îÄ accessLogger.js         # Sistema de logs

    ‚îî‚îÄ‚îÄ pdfParseWrapper.cjs     # Wrapper para PDF‚îÇ   ‚îî‚îÄ‚îÄ index.js                # Configura√ß√µes centralizadas

```

‚îî‚îÄ‚îÄ routes/**Opera√ß√µes dispon√≠veis:**

### Fluxo de Requisi√ß√£o

    ‚îú‚îÄ‚îÄ docs.js                 # Documenta√ß√£o HTML- `somar` - Adi√ß√£o

```

Cliente ‚Üí IP Filter ‚Üí CORS ‚Üí Validator ‚Üí Controller ‚Üí Response    ‚îú‚îÄ‚îÄ logsDashboard.js        # Dashboard de logs- `subtrair` - Subtra√ß√£o

                                ‚Üì

                          Error Handler (se erro)    ‚îî‚îÄ‚îÄ logsRoutes.js           # API de logs- `multiplicar` - Multiplica√ß√£o

```

```- `dividir` - Divis√£o

### Componentes Principais

- `porcentagem` - C√°lculo de percentual

#### 1. **BaseController**

Classe base que todos os controllers estendem, fornecendo:### Fluxo de Requisi√ß√£o

- `success(res, data, message, statusCode)` - Resposta de sucesso padronizada

- `error(res, message, statusCode, errors)` - Resposta de erro padronizada**Requisi√ß√£o:**

- `execute(req, res, handler)` - Wrapper com try-catch autom√°tico

``````bash

#### 2. **Auto-loader**

Sistema que descobre e registra rotas automaticamente:Cliente ‚Üí IP Filter ‚Üí CORS ‚Üí Validator ‚Üí Controller ‚Üí Responsecurl -X POST https://api.samm.host/calcular \

- Varre `src/functions/` em busca de arquivos `*Routes.js`

- Registra rotas no Express automaticamente                                ‚Üì  -H "Content-Type: application/json" \

- Ignora pasta `_TEMPLATE`

                          Error Handler (se erro)  -d '{"operacao": "somar", "a": 10, "b": 5}'

#### 3. **Validator**

Middleware de valida√ß√£o com schemas reutiliz√°veis:``````

- Valida√ß√£o de campos obrigat√≥rios

- Valida√ß√£o de tipos de dados

- Valida√ß√£o de tamanho/comprimento

- Valida√ß√£o de valores enum### Componentes Principais**Resposta:**



#### 4. **Error Handler**```json

Tratamento global de erros:

- Captura todos os erros n√£o tratados#### 1. **BaseController**{

- Handler personalizado para 404

- Stack trace em ambiente de desenvolvimentoClasse base que todos os controllers estendem, fornecendo:  "operacao": "somar",



---- `success(res, data, message, statusCode)` - Resposta de sucesso padronizada  "a": 10,



## üÜï Como Criar Nova Funcionalidade- `error(res, message, statusCode, errors)` - Resposta de erro padronizada  "b": 5,



### M√©todo R√°pido (5 minutos)- `execute(req, res, handler)` - Wrapper com try-catch autom√°tico  "resultado": 15



```powershell}

# 1. Copiar template

Copy-Item -Path "src/functions/_TEMPLATE" -Destination "src/functions/minha-feature" -Recurse#### 2. **Auto-loader**```



# 2. Renomear arquivosSistema que descobre e registra rotas automaticamente:

# template* ‚Üí minhafeature*

- Varre `src/funcionalidades/` em busca de arquivos `*Routes.js`**Exemplo de Porcentagem:**

# 3. Editar controller e routes

# Implementar sua l√≥gica- Registra rotas no Express automaticamente```bash



# 4. Reiniciar servidor- Ignora pasta `_TEMPLATE`curl -X POST https://api.samm.host/calcular \

npm start

  -H "Content-Type: application/json" \

# ‚úÖ Pronto! As rotas ser√£o descobertas automaticamente

```#### 3. **Validator**  -d '{"operacao": "porcentagem", "a": 100, "b": 15}'



### Documenta√ß√£o CompletaMiddleware de valida√ß√£o com schemas reutiliz√°veis:```



Para um guia completo com exemplos, consulte:- Valida√ß√£o de campos obrigat√≥riosRetorna: `15` (15% de 100)

**[src/functions/_TEMPLATE/README.md](src/functions/_TEMPLATE/README.md)**

- Valida√ß√£o de tipos

---

- Valida√ß√£o de comprimento---

## ‚öôÔ∏è Configura√ß√£o

- Valida√ß√£o de valores enum

### Vari√°veis de Ambiente (.env)

## üîß Instala√ß√£o

```env

# Servidor#### 4. **Error Handler**

PORT=3000

HOST=0.0.0.0Tratamento global de erros:### Pr√©-requisitos

NODE_ENV=development

- Captura todos os erros n√£o tratados- Node.js >= 22.18.0

# Seguran√ßa - IPs autorizados (separados por v√≠rgula)

# Deixe vazio para permitir todos- Handler personalizado para 404- npm >= 10.x

ALLOWED_IPS=127.0.0.1,192.168.1.100,177.73.205.198

- Stack trace em ambiente de desenvolvimento

# CORS

CORS_ORIGIN=*### Passos



# Logs---

LOG_LEVEL=info

MAX_LOGS=1001. **Clone o reposit√≥rio:**

LOG_RETENTION_DAYS=7

## üì° Endpoints Dispon√≠veis```bash

# Upload

MAX_FILE_SIZE=5242880  # 5MB em bytesgit clone https://github.com/gilbertoromanholew/api.git

```

### Sistemacd api

### Configura√ß√£o de IPs Autorizados

```

Por padr√£o, `localhost` (127.0.0.1 e ::1) sempre √© permitido.

| M√©todo | Endpoint | Descri√ß√£o |

**Adicionar IPs:**

```env|--------|----------|-----------|2. **Instale as depend√™ncias:**

ALLOWED_IPS=192.168.1.100,177.73.205.198,104.23.254.125

```| `GET` | `/` | Informa√ß√µes da API em JSON |```bash



**‚ö†Ô∏è Importante:** Se usar Cloudflare ou proxy, configure como "DNS only" (desabilitar proxy) ou adicione o IP do proxy na lista.| `GET` | `/docs` | Documenta√ß√£o HTML interativa |npm install



---| `GET` | `/logs` | Dashboard de logs em tempo real |```



## üîí Seguran√ßa| `GET` | `/api/logs` | API de logs (JSON) |



### Filtro de IP3. **Configure as vari√°veis de ambiente:**



A API implementa um sistema de whitelist de IPs:### Funcionalidade: Exemplo (CRUD de Usu√°rios)```bash

- ‚úÖ **IPs autorizados** ‚Üí Acesso total √† API

- ‚ùå **IPs n√£o autorizados** ‚Üí Erro 403cp .env.example .env



**Sempre permitidos:**| M√©todo | Endpoint | Descri√ß√£o |```

- `127.0.0.1` (localhost IPv4)

- `::1` (localhost IPv6)|--------|----------|-----------|



### Detec√ß√£o de IP Real| `GET` | `/usuarios` | Lista todos os usu√°rios (com filtros) |4. **Inicie o servidor:**



O filtro detecta automaticamente o IP real atrav√©s de headers:| `GET` | `/usuarios/estatisticas` | Estat√≠sticas dos usu√°rios |```bash

- `X-Forwarded-For` (proxies, load balancers)

- `X-Real-IP` (nginx, Apache)| `GET` | `/usuarios/:id` | Busca usu√°rio por ID |npm start

- `req.ip` (conex√£o direta)

| `POST` | `/usuarios` | Cria novo usu√°rio |```

### Logs de Acesso

| `PUT` | `/usuarios/:id` | Atualiza usu√°rio |

Todos os acessos s√£o registrados com:

- IP do cliente| `DELETE` | `/usuarios/:id` | Remove usu√°rio |5. **Acesse a API:**

- Endpoint acessado

- Status da requisi√ß√£o (autorizado/negado)```

- User-Agent

- Timestamp**Filtros dispon√≠veis em GET /usuarios:**http://localhost:3000



---- `?ativo=true/false` - Filtrar por status```



## üöÄ Deploy- `?idade_min=25` - Idade m√≠nima



### Deploy em VPS- `?idade_max=40` - Idade m√°xima---



1. **Conectar ao servidor:**

```bash

ssh usuario@seu-servidor.com### Funcionalidade: PDF## ‚öôÔ∏è Configura√ß√£o

```



2. **Instalar Node.js:**

```bash| M√©todo | Endpoint | Descri√ß√£o |### Arquivo `.env`

curl -fsSL https://deb.nodesource.com/setup_22.x | sudo -E bash -

sudo apt-get install -y nodejs|--------|----------|-----------|

```

| `POST` | `/read-pdf` | Extrai texto de arquivo PDF |Copie `.env.example` para `.env` e configure:

3. **Clonar e configurar:**

```bash

git clone https://github.com/gilbertoromanholew/api.git

cd api---```env

npm install

cp .env.example .env# Servidor

nano .env  # Editar configura√ß√µes

```## üÜï Como Criar Nova FuncionalidadePORT=3000



4. **Instalar PM2:**HOST=0.0.0.0

```bash

sudo npm install -g pm2### M√©todo 1: Copiar Template (5 minutos)

```

# Seguran√ßa - IPs autorizados (separados por v√≠rgula)

5. **Iniciar aplica√ß√£o:**

```bash```powershellALLOWED_IPS=127.0.0.1,192.168.1.100,177.73.205.198

pm2 start server.js --name api

pm2 save# 1. Copiar template

pm2 startup  # Configurar inicializa√ß√£o autom√°tica

```Copy-Item -Path "src/funcionalidades/_TEMPLATE" -Destination "src/funcionalidades/minha-feature" -Recurse# Logs



6. **Verificar status:**LOG_LEVEL=info

```bash

pm2 status# 2. Renomear arquivosLOG_FILE=false

pm2 logs api

```# template* ‚Üí minhafeature*```



### Configurar HTTPS (Nginx + Let's Encrypt)



1. **Instalar Nginx:**# 3. Editar controller e routes### Configura√ß√£o de IPs Autorizados

```bash

sudo apt install nginx# Implementar sua l√≥gica

```

Por padr√£o, `localhost` (127.0.0.1 e ::1) sempre √© permitido. Adicione outros IPs conforme necess√°rio:

2. **Configurar proxy reverso:**

```nginx# 4. Reiniciar servidor

# /etc/nginx/sites-available/api

server {npm start```env

    listen 80;

    server_name api.samm.host;ALLOWED_IPS=192.168.1.100,177.73.205.198,104.23.254.125



    location / {# ‚úÖ Pronto! As rotas ser√£o descobertas automaticamente```

        proxy_pass http://localhost:3000;

        proxy_http_version 1.1;```

        proxy_set_header Upgrade $http_upgrade;

        proxy_set_header Connection 'upgrade';**Importante:** Se usar Cloudflare ou proxy, desabilite o proxy (DNS only) ou adicione o IP do proxy.

        proxy_set_header Host $host;

        proxy_set_header X-Real-IP $remote_addr;### M√©todo 2: Manual

        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;

        proxy_cache_bypass $http_upgrade;---

    }

}1. **Criar pasta** em `src/funcionalidades/`## üìÅ Estrutura do Projeto

```

2. **Criar Controller** estendendo `BaseController`

3. **Ativar site:**

```bash3. **Criar Routes** exportando um `Router` do Express```

sudo ln -s /etc/nginx/sites-available/api /etc/nginx/sites-enabled/

sudo nginx -t4. **Reiniciar servidor** - Auto-descoberta far√° o resto!api/

sudo systemctl restart nginx

```‚îú‚îÄ‚îÄ .env                         # Vari√°veis de ambiente (n√£o commitar)



4. **Instalar SSL:**### Exemplo M√≠nimo‚îú‚îÄ‚îÄ .env.example                 # Template de configura√ß√£o

```bash

sudo apt install certbot python3-certbot-nginx‚îú‚îÄ‚îÄ .gitignore                   # Arquivos ignorados pelo git

sudo certbot --nginx -d api.samm.host

``````javascript‚îú‚îÄ‚îÄ package.json                 # Depend√™ncias e scripts



### Atualizar Deploy// src/funcionalidades/hello/helloController.js‚îú‚îÄ‚îÄ package-lock.json            # Lock de depend√™ncias



```bashimport { BaseController } from '../../core/BaseController.js';‚îú‚îÄ‚îÄ server.js                    # Arquivo principal da aplica√ß√£o

cd /caminho/da/api

git pull origin main‚îú‚îÄ‚îÄ README.md                    # Documenta√ß√£o principal

npm install

pm2 restart apiclass HelloController extends BaseController {‚îÇ

```

    async sayHello(req, res) {‚îî‚îÄ‚îÄ src/

---

        return this.execute(req, res, async (req, res) => {    ‚îú‚îÄ‚îÄ config/                  # Configura√ß√µes

## üìÅ Estrutura do Projeto

            const { nome } = req.body;    ‚îÇ   ‚îú‚îÄ‚îÄ index.js             # Carrega vari√°veis do .env

```

api/            return this.success(res, { mensagem: `Ol√°, ${nome}!` });    ‚îÇ   ‚îî‚îÄ‚îÄ allowedIPs.js        # Lista de IPs autorizados

‚îú‚îÄ‚îÄ .env                         # Vari√°veis de ambiente (n√£o commitar)

‚îú‚îÄ‚îÄ .gitignore                   # Arquivos ignorados        });    ‚îÇ

‚îú‚îÄ‚îÄ package.json                 # Depend√™ncias e scripts

‚îú‚îÄ‚îÄ server.js                    # Entry point    }    ‚îú‚îÄ‚îÄ middlewares/             # Middlewares Express

‚îú‚îÄ‚îÄ README.md                    # Este arquivo

‚îÇ}    ‚îÇ   ‚îî‚îÄ‚îÄ ipFilter.js          # Filtro de seguran√ßa por IP

‚îî‚îÄ‚îÄ src/

    ‚îú‚îÄ‚îÄ config/                  # Configura√ß√µes    ‚îÇ

    ‚îÇ   ‚îú‚îÄ‚îÄ index.js             # Carrega vari√°veis do .env

    ‚îÇ   ‚îî‚îÄ‚îÄ allowedIPs.js        # Lista de IPs autorizadosexport default new HelloController();    ‚îú‚îÄ‚îÄ routes/                  # Rotas principais

    ‚îÇ

    ‚îú‚îÄ‚îÄ core/                    # N√∫cleo da API```    ‚îÇ   ‚îú‚îÄ‚îÄ index.js             # GET / (documenta√ß√£o JSON)

    ‚îÇ   ‚îú‚îÄ‚îÄ BaseController.js    # Classe base para controllers

    ‚îÇ   ‚îî‚îÄ‚îÄ routeLoader.js       # Auto-loader de rotas    ‚îÇ   ‚îî‚îÄ‚îÄ docs.js              # GET /docs (p√°gina HTML)

    ‚îÇ

    ‚îú‚îÄ‚îÄ middlewares/             # Middlewares Express```javascript    ‚îÇ

    ‚îÇ   ‚îú‚îÄ‚îÄ errorHandler.js      # Tratamento global de erros

    ‚îÇ   ‚îú‚îÄ‚îÄ ipFilter.js          # Filtro de seguran√ßa por IP// src/funcionalidades/hello/helloRoutes.js    ‚îú‚îÄ‚îÄ utils/                   # Utilit√°rios

    ‚îÇ   ‚îî‚îÄ‚îÄ validator.js         # Valida√ß√£o de requisi√ß√µes

    ‚îÇimport { Router } from 'express';    ‚îÇ   ‚îî‚îÄ‚îÄ pdfParseWrapper.cjs  # Wrapper CommonJS para pdf-parse

    ‚îú‚îÄ‚îÄ routes/                  # Rotas de sistema

    ‚îÇ   ‚îú‚îÄ‚îÄ index.js             # GET / (documenta√ß√£o JSON)import helloController from './helloController.js';    ‚îÇ

    ‚îÇ   ‚îú‚îÄ‚îÄ docs.js              # GET /docs (p√°gina HTML)

    ‚îÇ   ‚îú‚îÄ‚îÄ logsDashboard.js     # GET /logs (dashboard)    ‚îî‚îÄ‚îÄ funcionalidades/         # Funcionalidades modulares

    ‚îÇ   ‚îî‚îÄ‚îÄ logsRoutes.js        # API de logs

    ‚îÇconst router = Router();        ‚îÇ

    ‚îú‚îÄ‚îÄ utils/                   # Utilit√°rios

    ‚îÇ   ‚îú‚îÄ‚îÄ accessLogger.js      # Sistema de logsrouter.post('/hello', (req, res) => helloController.sayHello(req, res));        ‚îú‚îÄ‚îÄ validacao/           # Valida√ß√£o de documentos

    ‚îÇ   ‚îî‚îÄ‚îÄ pdfParseWrapper.cjs  # Wrapper CommonJS para pdf-parse

    ‚îÇexport default router;        ‚îÇ   ‚îú‚îÄ‚îÄ README.md        # Documenta√ß√£o da funcionalidade

    ‚îî‚îÄ‚îÄ functions/               # Funcionalidades modulares

        ‚îÇ```        ‚îÇ   ‚îú‚îÄ‚îÄ cpfValidator.js  # Algoritmo de valida√ß√£o CPF

        ‚îú‚îÄ‚îÄ _TEMPLATE/           # Template oficial

        ‚îÇ   ‚îú‚îÄ‚îÄ README.md        # Guia completo (300+ linhas)        ‚îÇ   ‚îú‚îÄ‚îÄ cpfController.js # Controller de requisi√ß√µes

        ‚îÇ   ‚îú‚îÄ‚îÄ templateController.js

        ‚îÇ   ‚îú‚îÄ‚îÄ templateRoutes.js**Pronto!** Reinicie o servidor e acesse `POST /hello`        ‚îÇ   ‚îî‚îÄ‚îÄ cpfRoutes.js     # Rotas: POST /validate-cpf

        ‚îÇ   ‚îî‚îÄ‚îÄ templateUtils.js

        ‚îÇ        ‚îÇ

        ‚îú‚îÄ‚îÄ exemplo/             # Exemplo de CRUD

        ‚îÇ   ‚îú‚îÄ‚îÄ exemploController.js---        ‚îú‚îÄ‚îÄ pdf/                 # Processamento de PDF

        ‚îÇ   ‚îî‚îÄ‚îÄ exemploRoutes.js

        ‚îÇ        ‚îÇ   ‚îú‚îÄ‚îÄ README.md        # Documenta√ß√£o da funcionalidade

        ‚îî‚îÄ‚îÄ pdf/                 # Processamento de PDF

            ‚îú‚îÄ‚îÄ README.md        # Documenta√ß√£o espec√≠fica## ‚öôÔ∏è Configura√ß√£o        ‚îÇ   ‚îú‚îÄ‚îÄ pdfController.js # Controller de PDF

            ‚îú‚îÄ‚îÄ pdfController.js

            ‚îî‚îÄ‚îÄ pdfRoutes.js        ‚îÇ   ‚îî‚îÄ‚îÄ pdfRoutes.js     # Rotas: POST /read-pdf

```

### Vari√°veis de Ambiente (.env)        ‚îÇ

**Total:** ~20 arquivos essenciais de c√≥digo + documenta√ß√£o

        ‚îú‚îÄ‚îÄ calculo/             # Opera√ß√µes matem√°ticas

---

```env        ‚îÇ   ‚îú‚îÄ‚îÄ README.md        # Documenta√ß√£o da funcionalidade

## üêõ Troubleshooting

# Servidor        ‚îÇ   ‚îú‚îÄ‚îÄ calculoUtils.js  # Fun√ß√µes matem√°ticas

### Erro: "Cannot find module"

```bashPORT=3000        ‚îÇ   ‚îú‚îÄ‚îÄ calculoController.js # Controller de c√°lculos

npm install

pm2 restart apiHOST=0.0.0.0        ‚îÇ   ‚îî‚îÄ‚îÄ calculoRoutes.js # Rotas: POST /calcular

```

NODE_ENV=development        ‚îÇ

### Erro: Porta 3000 j√° em uso

```bash        ‚îî‚îÄ‚îÄ extras/              # Funcionalidades futuras

# Windows (PowerShell)

Get-Process -Id (Get-NetTCPConnection -LocalPort 3000).OwningProcess | Stop-Process# Seguran√ßa            ‚îî‚îÄ‚îÄ README.md        # Planejamento de features



# Linux/MacALLOWED_IPS=192.168.1.1,10.0.0.1  # IPs permitidos (vazio = todos)```

lsof -ti:3000 | xargs kill -9

CORS_ORIGIN=*                     # Origem CORS permitida

# Ou mudar a porta no .env

PORT=3001**Total:** ~20 arquivos essenciais de c√≥digo + documenta√ß√£o

```

# Rate Limiting

### Erro 403 mesmo com IP autorizado

RATE_LIMIT_WINDOW=60000           # Janela em ms (1 min)---

1. Verifique o IP detectado nos logs:

```bashRATE_LIMIT_MAX=100                # M√°ximo de requisi√ß√µes

pm2 logs api

```## üîí Seguran√ßa



2. Se estiver usando Cloudflare:# Logs

   - Acesse o painel do Cloudflare

   - V√° em DNSMAX_LOGS=100                      # M√°ximo de logs em mem√≥ria### Filtro de IP

   - Desabilite o proxy (nuvem laranja ‚Üí cinza)

LOG_RETENTION_DAYS=7              # Dias para manter logs

3. Se estiver atr√°s de proxy/load balancer:

   - Verifique os headers `X-Forwarded-For` ou `X-Real-IP`A API implementa um sistema de whitelist de IPs:

   - Adicione o IP do proxy na lista de permitidos

# Upload

### PDF n√£o est√° sendo lido

MAX_FILE_SIZE=5242880             # Tamanho m√°ximo (5MB)- ‚úÖ **IPs autorizados** ‚Üí Acesso total √† API

1. Verifique o formato do arquivo (deve ser PDF v√°lido)

2. Verifique o tamanho (limite padr√£o de 5MB)```- ‚ùå **IPs n√£o autorizados** ‚Üí Erro 403

3. Verifique se o campo do form-data √© `pdf`



### Rotas n√£o sendo descobertas

### Configura√ß√£o Centralizada**Configura√ß√£o no `.env`:**

1. Verifique se o arquivo termina com `Routes.js`

2. Verifique se tem `export default router` no final```env

3. Reinicie o servidor

Todas as configura√ß√µes est√£o em `src/config/index.js`:ALLOWED_IPS=192.168.1.100,177.73.205.198

---

```

## ü§ù Contribuindo

```javascript

Contribui√ß√µes s√£o bem-vindas! Siga os passos:

import config from './src/config/index.js';**Sempre permitidos:**

1. **Fork** o projeto

2. **Crie uma branch** para sua feature (`git checkout -b feature/MinhaFeature`)- `127.0.0.1` (localhost IPv4)

3. **Commit suas mudan√ßas** (`git commit -m 'feat: Adiciona MinhaFeature'`)

4. **Push para a branch** (`git push origin feature/MinhaFeature`)// Uso- `::1` (localhost IPv6)

5. **Abra um Pull Request**

config.server.port        // 3000

### Padr√£o de Commits

config.security.corsOrigin  // '*'### Suporte a Proxies

Seguimos [Conventional Commits](https://www.conventionalcommits.org/):

- `feat:` Nova funcionalidadeconfig.logs.maxLogs       // 100

- `fix:` Corre√ß√£o de bug

- `docs:` Documenta√ß√£oconfig.upload.maxFileSize // 5242880O filtro de IP detecta automaticamente o IP real atrav√©s de headers:

- `refactor:` Refatora√ß√£o de c√≥digo

- `test:` Testes```- `X-Forwarded-For` (proxies, load balancers)

- `chore:` Tarefas de manuten√ß√£o

- `X-Real-IP` (nginx, Apache)

---

---- `req.ip` (conex√£o direta)

## üìÑ Licen√ßa



Este projeto est√° sob a licen√ßa **MIT**. Veja o arquivo [LICENSE](LICENSE) para mais detalhes.

## üí° Exemplos de Uso**Cloudflare:** Configure como "DNS only" (desabilitar proxy) para que o IP real seja detectado.

---



## üë®‚Äçüíª Autor

### Exemplo 1: Listar Usu√°rios com Filtros---

**Gilberto Romano Holew**

- GitHub: [@gilbertoromanholew](https://github.com/gilbertoromanholew)

- Website: https://api.samm.host

**Requisi√ß√£o:**## üöÄ Deploy

---

```bash

## üìû Suporte

curl "http://localhost:3000/usuarios?ativo=true&idade_min=25&idade_max=35"### Deploy em VPS

Para quest√µes ou problemas:

- Abra uma [issue](https://github.com/gilbertoromanholew/api/issues)```

- Consulte a documenta√ß√£o em [/docs](https://api.samm.host/docs)

1. **Conectar ao servidor:**

---

**Resposta:**```bash

## üìä Status

```jsonssh usuario@seu-servidor.com

- **Vers√£o:** 2.0.0

- **Status:** ‚úÖ Online e funcional{```

- **√öltima atualiza√ß√£o:** 16 de outubro de 2025

- **Node.js:** >= 22.18.0  "success": true,

- **Express:** 5.1.0

  "message": "2 usu√°rio(s) encontrado(s)",2. **Instalar Node.js (se necess√°rio):**

---

  "data": {```bash

<div align="center">

    "total": 2,curl -fsSL https://deb.nodesource.com/setup_22.x | sudo -E bash -

**‚≠ê Se este projeto foi √∫til, considere dar uma estrela! ‚≠ê**

    "usuarios": [sudo apt-get install -y nodejs

Feito com ‚ù§Ô∏è por [Gilberto Romanhole](https://github.com/gilbertoromanholew)

      {```

</div>

        "id": 1,

        "nome": "Jo√£o Silva",3. **Clonar o reposit√≥rio:**

        "email": "joao@exemplo.com",```bash

        "idade": 30,git clone https://github.com/gilbertoromanholew/api.git

        "ativo": truecd api

      },```

      {

        "id": 2,4. **Instalar depend√™ncias:**

        "nome": "Maria Santos",```bash

        "email": "maria@exemplo.com",npm install

        "idade": 25,```

        "ativo": true

      }5. **Configurar vari√°veis:**

    ]```bash

  }cp .env.example .env

}nano .env  # Editar configura√ß√µes

``````



### Exemplo 2: Criar Usu√°rio6. **Instalar PM2 (gerenciador de processos):**

```bash

**Requisi√ß√£o:**sudo npm install -g pm2

```bash```

curl -X POST http://localhost:3000/usuarios \

  -H "Content-Type: application/json" \7. **Iniciar a aplica√ß√£o:**

  -d '{```bash

    "nome": "Pedro Costa",pm2 start server.js --name api

    "email": "pedro@exemplo.com",pm2 save

    "idade": 28,pm2 startup  # Configurar inicializa√ß√£o autom√°tica

    "ativo": true```

  }'

```8. **Verificar status:**

```bash

**Resposta:**pm2 status

```jsonpm2 logs api

{```

  "success": true,

  "message": "Usu√°rio criado com sucesso",### Atualizar Deploy

  "data": {

    "id": 4,```bash

    "nome": "Pedro Costa",cd /caminho/da/api

    "email": "pedro@exemplo.com",git pull origin main

    "idade": 28,npm install

    "ativo": true,pm2 restart api

    "criadoEm": "2025-10-16T19:30:00.000Z"```

  }

}### Configurar HTTPS (Nginx + Let's Encrypt)

```

1. **Instalar Nginx:**

### Exemplo 3: Erro de Valida√ß√£o```bash

sudo apt install nginx

**Requisi√ß√£o:**```

```bash

curl -X POST http://localhost:3000/usuarios \2. **Configurar proxy reverso:**

  -H "Content-Type: application/json" \```nginx

  -d '{"nome": "Jo"}'  # Nome muito curto# /etc/nginx/sites-available/api

```server {

    listen 80;

**Resposta:**    server_name api.samm.host;

```json

{    location / {

  "success": false,        proxy_pass http://localhost:3000;

  "message": "Erro de valida√ß√£o",        proxy_http_version 1.1;

  "errors": [        proxy_set_header Upgrade $http_upgrade;

    "Campo 'email' √© obrigat√≥rio",        proxy_set_header Connection 'upgrade';

    "Campo 'idade' √© obrigat√≥rio",        proxy_set_header Host $host;

    "Campo 'nome' deve ter entre 3 e 100 caracteres"        proxy_set_header X-Real-IP $remote_addr;

  ]        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;

}        proxy_cache_bypass $http_upgrade;

```    }

}

### Exemplo 4: Ler PDF```



**Requisi√ß√£o:**3. **Ativar site:**

```bash```bash

curl -X POST http://localhost:3000/read-pdf \sudo ln -s /etc/nginx/sites-available/api /etc/nginx/sites-enabled/

  -F "pdf=@documento.pdf"sudo nginx -t

```sudo systemctl restart nginx

```

**Resposta:**

```json4. **Instalar SSL:**

{```bash

  "success": true,sudo apt install certbot python3-certbot-nginx

  "message": "PDF processado com sucesso",sudo certbot --nginx -d api.samm.host

  "data": {```

    "text": "Conte√∫do extra√≠do do PDF...",

    "pages": 5,---

    "info": {

      "Title": "Documento Exemplo",## üõ†Ô∏è Desenvolvimento

      "Author": "Jo√£o Silva"

    },### Adicionar Nova Funcionalidade

    "metadata": {

      "CreationDate": "2025-10-16T10:00:00.000Z"1. **Criar estrutura:**

    }```bash

  }mkdir -p src/funcionalidades/minha-funcionalidade

}cd src/funcionalidades/minha-funcionalidade

``````



---2. **Criar arquivos:**



## üìÇ Estrutura do Projeto**`README.md`** - Documenta√ß√£o

```markdown

```# Minha Funcionalidade

api/

‚îú‚îÄ‚îÄ src/## Descri√ß√£o

‚îÇ   ‚îú‚îÄ‚îÄ core/...

‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ BaseController.js        # Classe base para controllers

‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ routeLoader.js            # Auto-carregador de rotas## Endpoint

‚îÇ   ‚îú‚îÄ‚îÄ middlewares/POST /minha-rota

‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ errorHandler.js           # Tratamento global de erros

‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ ipFilter.js               # Filtro de IP## Par√¢metros

‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ validator.js              # Valida√ß√£o centralizada...

‚îÇ   ‚îú‚îÄ‚îÄ funcionalidades/```

‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ _TEMPLATE/                # üì¶ Template para novas features

‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ README.md**`minhaController.js`** - L√≥gica

‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ templateController.js```javascript

‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ templateRoutes.jsexport const minhaFuncao = (req, res) => {

‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ templateUtils.js    const { parametro } = req.body;

‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ exemplo/                  # ‚úÖ CRUD de usu√°rios    

‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ exemploController.js    // Sua l√≥gica aqui

‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ exemploRoutes.js    

‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ pdf/                      # üìÑ Leitura de PDF    res.json({ resultado: 'sucesso' });

‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ pdfController.js};

‚îÇ   ‚îÇ       ‚îî‚îÄ‚îÄ pdfRoutes.js```

‚îÇ   ‚îú‚îÄ‚îÄ config/

‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ index.js                  # Configura√ß√µes centralizadas**`minhaRoutes.js`** - Rotas

‚îÇ   ‚îú‚îÄ‚îÄ routes/```javascript

‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ docs.js                   # Documenta√ß√£o HTMLimport express from 'express';

‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ index.js                  # Rotas de sistemaimport { minhaFuncao } from './minhaController.js';

‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ logsDashboard.js          # Dashboard de logs

‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ logsRoutes.js             # API de logsconst router = express.Router();

‚îÇ   ‚îî‚îÄ‚îÄ utils/

‚îÇ       ‚îú‚îÄ‚îÄ ipLogger.js               # Logger de acessosrouter.post('/minha-rota', minhaFuncao);

‚îÇ       ‚îî‚îÄ‚îÄ pdfParseWrapper.cjs       # Wrapper para pdf-parse

‚îú‚îÄ‚îÄ .env                              # Vari√°veis de ambienteexport default router;

‚îú‚îÄ‚îÄ .env.example                      # Exemplo de configura√ß√£o```

‚îú‚îÄ‚îÄ package.json                      # Depend√™ncias

‚îú‚îÄ‚îÄ server.js                         # Entry point3. **Registrar no `server.js`:**

‚îî‚îÄ‚îÄ README.md                         # Este arquivo```javascript

```import minhaRoutes from './src/funcionalidades/minha-funcionalidade/minhaRoutes.js';



---// ... outras importa√ß√µes ...



## üìö Documenta√ß√£o Adicionalapp.use(minhaRoutes);

```

- **[GUIA_RAPIDO.md](./GUIA_RAPIDO.md)** - Guia de in√≠cio r√°pido (5 minutos)

- **[IMPLEMENTACAO_CONCLUIDA.md](./IMPLEMENTACAO_CONCLUIDA.md)** - Documenta√ß√£o t√©cnica completa4. **Atualizar documenta√ß√£o em `src/routes/index.js`**

- **[SUGESTOES_MELHORIA.md](./SUGESTOES_MELHORIA.md)** - Decis√µes de arquitetura

- **[RESUMO_EXECUTIVO.md](./RESUMO_EXECUTIVO.md)** - Resumo executivo da implementa√ß√£o5. **Testar:**

- **[src/funcionalidades/_TEMPLATE/README.md](./src/funcionalidades/_TEMPLATE/README.md)** - Como criar novas funcionalidades```bash

npm start

---

curl -X POST http://localhost:3000/minha-rota \

## üéØ Roadmap  -H "Content-Type: application/json" \

  -d '{"parametro": "valor"}'

### ‚úÖ Implementado (v2.0)```



- [x] Auto-carregamento de rotas### Scripts dispon√≠veis

- [x] BaseController padronizado

- [x] Sistema de valida√ß√£o centralizado```bash

- [x] Tratamento global de errosnpm start       # Inicia o servidor

- [x] Dashboard de documenta√ß√£onpm test        # (adicionar testes no futuro)

- [x] Sistema de templates```

- [x] Logs de acesso

- [x] Filtro de IP### Depend√™ncias



### üöß Em Planejamento (v3.0)**Produ√ß√£o:**

- `express@5.1.0` - Framework web

- [ ] Testes automatizados (Jest)- `cors` - Cross-Origin Resource Sharing

- [ ] OpenAPI/Swagger docs- `dotenv` - Vari√°veis de ambiente

- [ ] Rate limiting avan√ßado- `multer` - Upload de arquivos

- [ ] Cache com Redis- `pdf-parse@1.1.1` - Extra√ß√£o de texto de PDF

- [ ] WebSockets

- [ ] Autentica√ß√£o JWT**Desenvolvimento:**

- [ ] Docker containerization- Node.js >= 22.18.0

- [ ] CI/CD pipeline

---

---

## üìù Documenta√ß√£o de Funcionalidades

## ü§ù Contribuindo

Cada funcionalidade possui sua pr√≥pria documenta√ß√£o detalhada:

Contribui√ß√µes s√£o bem-vindas! Siga os passos:

- [Valida√ß√£o de CPF](src/funcionalidades/validacao/README.md)

1. **Fork** o projeto- [Leitura de PDF](src/funcionalidades/pdf/README.md)

2. **Crie uma branch** para sua feature (`git checkout -b feature/MinhaFeature`)- [Calculadora](src/funcionalidades/calculo/README.md)

3. **Commit suas mudan√ßas** (`git commit -m 'feat: Adiciona MinhaFeature'`)- [Extras (Futuras)](src/funcionalidades/extras/README.md)

4. **Push para a branch** (`git push origin feature/MinhaFeature`)

5. **Abra um Pull Request**---



### Padr√£o de Commits## üêõ Troubleshooting



Seguimos [Conventional Commits](https://www.conventionalcommits.org/):### Erro: "Cannot find module"

```bash

- `feat:` Nova funcionalidadenpm install

- `fix:` Corre√ß√£o de bugpm2 restart api

- `docs:` Documenta√ß√£o```

- `refactor:` Refatora√ß√£o de c√≥digo

- `test:` Testes### Erro: Porta 3000 j√° em uso

- `chore:` Tarefas de manuten√ß√£o```bash

# Encontrar processo na porta 3000

---lsof -ti:3000



## üìÑ Licen√ßa# Matar processo

lsof -ti:3000 | xargs kill -9

Este projeto est√° sob a licen√ßa **MIT**. Veja o arquivo [LICENSE](LICENSE) para mais detalhes.

# Ou mudar a porta no .env

---PORT=3001

```

## üë®‚Äçüíª Autor

### Erro 403 mesmo com IP autorizado

**Gilberto Romanhole**

1. Verifique o IP detectado nos logs:

- GitHub: [@gilbertoromanholew](https://github.com/gilbertoromanholew)```bash

- Reposit√≥rio: [github.com/gilbertoromanholew/api](https://github.com/gilbertoromanholew/api)pm2 logs api

```

---

2. Se estiver usando Cloudflare:

## üìû Suporte   - Acesse o painel do Cloudflare

   - V√° em DNS

- üìñ Veja a [Documenta√ß√£o Completa](./GUIA_RAPIDO.md)   - Desabilite o proxy (nuvem laranja ‚Üí cinza)

- üêõ Reporte bugs via [Issues](https://github.com/gilbertoromanholew/api/issues)

- üí¨ Tire d√∫vidas nas [Discussions](https://github.com/gilbertoromanholew/api/discussions)3. Se estiver atr√°s de proxy/load balancer:

   - Verifique os headers `X-Forwarded-For` ou `X-Real-IP`

---   - Adicione o IP do proxy na lista de permitidos



## üåü M√©tricas### PDF n√£o est√° sendo lido



| M√©trica | Valor |1. Verifique o formato do arquivo (deve ser PDF v√°lido)

|---------|-------|2. Verifique o tamanho (multer tem limite padr√£o)

| **Tempo para criar funcionalidade** | 5 minutos (70% mais r√°pido) |3. Verifique se o campo do form-data √© `pdf`

| **Linhas de c√≥digo por controller** | 15-20 linhas (50% menos) |

| **Tempo de configura√ß√£o** | 30 segundos (95% mais r√°pido) |---

| **Cobertura de testes** | Em desenvolvimento |

## üìÑ Licen√ßa

---

Este projeto √© propriet√°rio. Todos os direitos reservados.

## üéâ Agradecimentos

---

- [Express.js](https://expressjs.com/) - Framework web minimalista

- [Node.js](https://nodejs.org/) - Runtime JavaScript## üë®‚Äçüíª Autor

- [pdf-parse](https://www.npmjs.com/package/pdf-parse) - Extra√ß√£o de texto de PDF

- [dotenv](https://www.npmjs.com/package/dotenv) - Gerenciamento de vari√°veis de ambiente**Gilberto Romano Holew**

- GitHub: [@gilbertoromanholew](https://github.com/gilbertoromanholew)

---- Website: https://api.samm.host



<div align="center">---



**‚≠ê Se este projeto foi √∫til, considere dar uma estrela! ‚≠ê**## üìû Suporte



Feito com ‚ù§Ô∏è por [Gilberto Romanhole](https://github.com/gilbertoromanholew)Para quest√µes ou problemas:

- Abra uma [issue](https://github.com/gilbertoromanholew/api/issues)

</div>- Entre em contato atrav√©s do site


---

## üìä Status

- **Vers√£o:** 2.0.0
- **Status:** ‚úÖ Online e funcional
- **√öltima atualiza√ß√£o:** 16 de outubro de 2025
- **Node.js:** >= 22.18.0
- **Express:** 5.1.0

---

**‚ö° API desenvolvida com foco em modularidade, seguran√ßa e escalabilidade.**
