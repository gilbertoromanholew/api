# ğŸš€ API Modular - Node.js & Express# ğŸš€ API Modular - Node.js & Express# ï¿½ API Multi-Funcional



[![Node.js](https://img.shields.io/badge/Node.js-22.18.0+-339933?logo=node.js&logoColor=white)](https://nodejs.org/)

[![Express](https://img.shields.io/badge/Express-5.1.0-000000?logo=express&logoColor=white)](https://expressjs.com/)

[![License](https://img.shields.io/badge/License-MIT-blue.svg)](LICENSE)[![Node.js](https://img.shields.io/badge/Node.js-22.18.0+-339933?logo=node.js&logoColor=white)](https://nodejs.org/)> API REST modular com validaÃ§Ã£o, processamento de PDF e cÃ¡lculos matemÃ¡ticos

[![Status](https://img.shields.io/badge/Status-Online-success.svg)](https://api.samm.host)

[![Express](https://img.shields.io/badge/Express-5.1.0-000000?logo=express&logoColor=white)](https://expressjs.com/)

> **API REST modular com auto-descoberta de rotas, validaÃ§Ã£o centralizada e sistema de templates para desenvolvimento rÃ¡pido.**

[![License](https://img.shields.io/badge/License-MIT-blue.svg)](LICENSE)[![Node.js](https://img.shields.io/badge/Node.js-22.18.0+-green.svg)](https://nodejs.org/)

**ğŸŒ URL de ProduÃ§Ã£o:** https://api.samm.host

[![Made with â¤ï¸](https://img.shields.io/badge/Made%20with-â¤%20ï¸-red.svg)](https://github.com/gilbertoromanholew/api)[![Express](https://img.shields.io/badge/Express-5.1.0-blue.svg)](https://expressjs.com/)

---

[![Status](https://img.shields.io/badge/Status-Online-success.svg)](https://api.samm.host)

## ğŸ“‹ Ãndice

> **API moderna e extensÃ­vel com arquitetura modular, auto-carregamento de rotas e sistema de templates para desenvolvimento rÃ¡pido.**

- [CaracterÃ­sticas](#-caracterÃ­sticas)

- [InstalaÃ§Ã£o](#-instalaÃ§Ã£o)---

- [InÃ­cio RÃ¡pido](#-inÃ­cio-rÃ¡pido)

- [Endpoints DisponÃ­veis](#-endpoints-disponÃ­veis)---

- [Arquitetura](#-arquitetura)

- [Como Criar Nova Funcionalidade](#-como-criar-nova-funcionalidade)## ğŸ“‹ Ãndice

- [ConfiguraÃ§Ã£o](#-configuraÃ§Ã£o)

- [SeguranÃ§a](#-seguranÃ§a)## âœ¨ CaracterÃ­sticas

- [Deploy](#-deploy)

- [Estrutura do Projeto](#-estrutura-do-projeto)- [VisÃ£o Geral](#-visÃ£o-geral)

- [Troubleshooting](#-troubleshooting)

- [Contribuindo](#-contribuindo)- ğŸ¯ **Arquitetura Modular** - Funcionalidades independentes e auto-descobertas- [Funcionalidades](#-funcionalidades)

- [LicenÃ§a](#-licenÃ§a)

- âš¡ **Auto-carregamento** - Rotas descobertas e registradas automaticamente- [InstalaÃ§Ã£o](#-instalaÃ§Ã£o)

---

- ğŸ›¡ï¸ **ValidaÃ§Ã£o Centralizada** - Sistema de schemas reutilizÃ¡veis- [ConfiguraÃ§Ã£o](#-configuraÃ§Ã£o)

## âœ¨ CaracterÃ­sticas

- ğŸ¨ **Respostas Padronizadas** - BaseController para consistÃªncia- [Uso](#-uso)

- ğŸ¯ **Arquitetura Modular** - Funcionalidades independentes e auto-descobertas

- âš¡ **Auto-carregamento de Rotas** - Descobre e registra rotas automaticamente- ğŸ“ **DocumentaÃ§Ã£o AutomÃ¡tica** - Dashboard web com lista de funcionalidades- [Estrutura](#-estrutura-do-projeto)

- ğŸ›¡ï¸ **ValidaÃ§Ã£o Centralizada** - Sistema de schemas reutilizÃ¡veis

- ğŸ¨ **Respostas Padronizadas** - BaseController para consistÃªncia- ğŸ”’ **Controle de Acesso** - Filtro de IP e logs de acessos- [SeguranÃ§a](#-seguranÃ§a)

- ğŸ“ **DocumentaÃ§Ã£o AutomÃ¡tica** - Dashboard web interativo

- ğŸ”’ **Controle de Acesso por IP** - Whitelist de IPs autorizados- ğŸš¦ **Tratamento de Erros** - Global error handler e 404 customizado- [Deploy](#-deploy)

- ğŸš¦ **Tratamento Global de Erros** - Error handler centralizado

- ğŸ“¦ **Sistema de Templates** - Crie novas funcionalidades em 5 minutos- ğŸ“¦ **Sistema de Templates** - Crie novas funcionalidades em 5 minutos- [Desenvolvimento](#-desenvolvimento)

- ğŸŒ **CORS Habilitado** - Pronto para APIs pÃºblicas

- ğŸ“Š **Dashboard de Logs** - Visualize acessos em tempo real- ğŸŒ **CORS Habilitado** - Pronto para APIs pÃºblicas



---- ğŸ“Š **Dashboard de Logs** - Visualize acessos em tempo real---



## ğŸ”§ InstalaÃ§Ã£o



### PrÃ©-requisitos---## ğŸ¯ VisÃ£o Geral



- **Node.js** >= 22.18.0

- **npm** >= 10.x

## ğŸ“‹ ÃndiceAPI REST modular construÃ­da com Node.js e Express, oferecendo mÃºltiplas funcionalidades:

### Passos

- âœ… ValidaÃ§Ã£o de documentos (CPF)

1. **Clone o repositÃ³rio:**

```bash- [InstalaÃ§Ã£o](#-instalaÃ§Ã£o)- ğŸ“„ ExtraÃ§Ã£o de texto de PDFs

git clone https://github.com/gilbertoromanholew/api.git

cd api- [InÃ­cio RÃ¡pido](#-inÃ­cio-rÃ¡pido)- ğŸ§® OperaÃ§Ãµes matemÃ¡ticas

```

- [Arquitetura](#-arquitetura)- ğŸ”’ Filtro de IP para seguranÃ§a

2. **Instale as dependÃªncias:**

```bash- [Endpoints DisponÃ­veis](#-endpoints-disponÃ­veis)- ğŸ“š DocumentaÃ§Ã£o interativa

npm install

```- [Como Criar Nova Funcionalidade](#-como-criar-nova-funcionalidade)



3. **Configure as variÃ¡veis de ambiente:**- [ConfiguraÃ§Ã£o](#-configuraÃ§Ã£o)**URL de ProduÃ§Ã£o**: https://api.samm.host

```bash

cp .env.example .env- [Exemplos de Uso](#-exemplos-de-uso)

# Edite o arquivo .env conforme necessÃ¡rio

```- [Estrutura do Projeto](#-estrutura-do-projeto)---



4. **Inicie o servidor:**- [DocumentaÃ§Ã£o Adicional](#-documentaÃ§Ã£o-adicional)

```bash

npm start- [Contribuindo](#-contribuindo)## âš¡ Funcionalidades

```

- [LicenÃ§a](#-licenÃ§a)

5. **Acesse a API:**

```### 1. ğŸ“š DocumentaÃ§Ã£o da API

http://localhost:3000

```---



---#### `GET /`



## ğŸš€ InÃ­cio RÃ¡pido## ğŸ”§ InstalaÃ§Ã£oRetorna documentaÃ§Ã£o completa em JSON com todos os endpoints, parÃ¢metros e exemplos.



### Testar a DocumentaÃ§Ã£o



```bash### PrÃ©-requisitos```bash

# Ver documentaÃ§Ã£o JSON

curl http://localhost:3000/curl https://api.samm.host/



# Acessar documentaÃ§Ã£o HTML interativa- **Node.js** >= 22.18.0```

curl http://localhost:3000/docs

```- **npm** ou **yarn**



### Testar Endpoints#### `GET /docs`



```bash### Clonar e InstalarPÃ¡gina HTML interativa com a documentaÃ§Ã£o visual.

# Validar CPF

curl -X POST http://localhost:3000/validate-cpf \

  -H "Content-Type: application/json" \

  -d '{"cpf": "12345678901"}'```bash```bash



# Fazer cÃ¡lculo# Clonar repositÃ³rio# Acesse no navegador:

curl -X POST http://localhost:3000/calcular \

  -H "Content-Type: application/json" \git clone https://github.com/gilbertoromanholew/api.githttps://api.samm.host/docs

  -d '{"operacao": "somar", "a": 10, "b": 5}'

cd api```

# Extrair texto de PDF

curl -X POST http://localhost:3000/read-pdf \

  -F "pdf=@documento.pdf"

```# Instalar dependÃªncias---



---npm install



## ğŸ“¡ Endpoints DisponÃ­veis### 2. âœ… ValidaÃ§Ã£o de CPF



### DocumentaÃ§Ã£o e Sistema# Configurar variÃ¡veis de ambiente



| MÃ©todo | Endpoint | DescriÃ§Ã£o |cp .env.example .env#### `POST /validate-cpf`

|--------|----------|-----------|

| `GET` | `/` | DocumentaÃ§Ã£o da API em JSON |# Edite o arquivo .env conforme necessÃ¡rio

| `GET` | `/docs` | DocumentaÃ§Ã£o HTML interativa |

| `GET` | `/logs` | Dashboard de logs em tempo real |Valida CPFs brasileiros usando o algoritmo oficial.

| `GET` | `/api/logs` | API de logs (JSON) |

| `GET` | `/api/logs/stats` | EstatÃ­sticas de acesso |# Iniciar servidor

| `GET` | `/api/functions` | Lista de funcionalidades disponÃ­veis |

npm start**RequisiÃ§Ã£o:**

### Funcionalidades

``````bash

#### 1. âœ… ValidaÃ§Ã£o de CPF

curl -X POST https://api.samm.host/validate-cpf \

**POST `/validate-cpf`**

O servidor estarÃ¡ rodando em **http://localhost:3000** ğŸ‰  -H "Content-Type: application/json" \

Valida CPFs brasileiros usando o algoritmo oficial.

  -d '{"cpf": "12345678901"}'

**RequisiÃ§Ã£o:**

```json---```

{

  "cpf": "12345678901"

}

```## ğŸš€ InÃ­cio RÃ¡pido**Resposta de Sucesso:**



**Resposta:**```json

```json

{### Testar a API{

  "success": true,

  "valido": true,  "valido": true,

  "cpf": "123.456.789-01",

  "mensagem": "CPF vÃ¡lido"```bash  "cpf": "123.456.789-01",

}

```# Ver informaÃ§Ãµes da API  "mensagem": "CPF vÃ¡lido"



---curl http://localhost:3000/}



#### 2. ğŸ§® Calculadora```



**POST `/calcular`**# Acessar documentaÃ§Ã£o HTML



Realiza operaÃ§Ãµes matemÃ¡ticas.curl http://localhost:3000/docs**Resposta de Erro:**



**OperaÃ§Ãµes disponÃ­veis:**```json

- `somar` - AdiÃ§Ã£o

- `subtrair` - SubtraÃ§Ã£o# Listar usuÃ¡rios exemplo{

- `multiplicar` - MultiplicaÃ§Ã£o

- `dividir` - DivisÃ£ocurl http://localhost:3000/usuarios  "valido": false,

- `porcentagem` - CÃ¡lculo percentual

  "cpf": "12345678901",

**RequisiÃ§Ã£o:**

```json# Criar novo usuÃ¡rio  "mensagem": "CPF invÃ¡lido"

{

  "operacao": "somar",curl -X POST http://localhost:3000/usuarios \}

  "a": 10,

  "b": 5  -H "Content-Type: application/json" \```

}

```  -d '{"nome":"JoÃ£o Silva","email":"joao@exemplo.com","idade":30}'



**Resposta:**---

```json

{# Buscar usuÃ¡rio por ID

  "success": true,

  "operacao": "somar",curl http://localhost:3000/usuarios/1### 3. ğŸ“„ Leitura de PDF

  "a": 10,

  "b": 5,

  "resultado": 15

}# Ver estatÃ­sticas#### `POST /read-pdf`

```

curl http://localhost:3000/usuarios/estatisticas

---

Extrai texto de arquivos PDF.

#### 3. ğŸ“„ Leitura de PDF

# Ler PDF

**POST `/read-pdf`**

curl -X POST http://localhost:3000/read-pdf \**RequisiÃ§Ã£o:**

Extrai texto de arquivos PDF.

  -F "pdf=@caminho/para/arquivo.pdf"```bash

**RequisiÃ§Ã£o:**

```bash```curl -X POST https://api.samm.host/read-pdf \

curl -X POST http://localhost:3000/read-pdf \

  -F "pdf=@documento.pdf"  -F "pdf=@documento.pdf"

```

---```

**Resposta:**

```json

{

  "success": true,## ğŸ—ï¸ Arquitetura**Resposta:**

  "texto": "ConteÃºdo extraÃ­do do PDF...",

  "paginas": 5,```json

  "info": {

    "titulo": "Documento",### VisÃ£o Geral{

    "autor": "Autor"

  }  "success": true,

}

```A API utiliza uma **arquitetura modular** onde cada funcionalidade Ã© auto-contida e descoberta automaticamente.  "texto": "ConteÃºdo extraÃ­do do PDF...",



---  "paginas": 5,



## ğŸ—ï¸ Arquitetura```  "info": {



### VisÃ£o Geralsrc/    "titulo": "Documento",



A API utiliza uma **arquitetura modular** onde cada funcionalidade Ã© auto-contida e descoberta automaticamente.â”œâ”€â”€ core/    "autor": "Autor"



```â”‚   â”œâ”€â”€ BaseController.js      # Classe base para controllers  }

src/

â”œâ”€â”€ core/â”‚   â””â”€â”€ routeLoader.js          # Auto-carregador de rotas}

â”‚   â”œâ”€â”€ BaseController.js      # Classe base para controllers

â”‚   â””â”€â”€ routeLoader.js          # Auto-carregador de rotasâ”œâ”€â”€ middlewares/```

â”œâ”€â”€ middlewares/

â”‚   â”œâ”€â”€ validator.js            # ValidaÃ§Ã£o centralizadaâ”‚   â”œâ”€â”€ validator.js            # ValidaÃ§Ã£o centralizada

â”‚   â”œâ”€â”€ errorHandler.js         # Tratamento global de erros

â”‚   â””â”€â”€ ipFilter.js             # Controle de acesso por IPâ”‚   â”œâ”€â”€ errorHandler.js         # Tratamento global de erros---

â”œâ”€â”€ functions/

â”‚   â”œâ”€â”€ _TEMPLATE/              # Template para novas featuresâ”‚   â””â”€â”€ ipFilter.js             # Controle de acesso por IP

â”‚   â”œâ”€â”€ exemplo/                # Exemplo de CRUD

â”‚   â””â”€â”€ pdf/                    # Leitura de PDFâ”œâ”€â”€ funcionalidades/### 4. ğŸ§® Calculadora

â”œâ”€â”€ config/

â”‚   â”œâ”€â”€ index.js                # ConfiguraÃ§Ãµes centralizadasâ”‚   â”œâ”€â”€ _TEMPLATE/              # Template para novas features

â”‚   â””â”€â”€ allowedIPs.js           # IPs autorizados

â”œâ”€â”€ routes/â”‚   â”œâ”€â”€ exemplo/                # CRUD de usuÃ¡rios (exemplo)#### `POST /calcular`

â”‚   â”œâ”€â”€ docs.js                 # DocumentaÃ§Ã£o HTML

â”‚   â”œâ”€â”€ logsDashboard.js        # Dashboard de logsâ”‚   â””â”€â”€ pdf/                    # Leitura de PDF

â”‚   â””â”€â”€ logsRoutes.js           # API de logs

â””â”€â”€ utils/â”œâ”€â”€ config/Realiza operaÃ§Ãµes matemÃ¡ticas.

    â”œâ”€â”€ accessLogger.js         # Sistema de logs

    â””â”€â”€ pdfParseWrapper.cjs     # Wrapper para PDFâ”‚   â””â”€â”€ index.js                # ConfiguraÃ§Ãµes centralizadas

```

â””â”€â”€ routes/**OperaÃ§Ãµes disponÃ­veis:**

### Fluxo de RequisiÃ§Ã£o

    â”œâ”€â”€ docs.js                 # DocumentaÃ§Ã£o HTML- `somar` - AdiÃ§Ã£o

```

Cliente â†’ IP Filter â†’ CORS â†’ Validator â†’ Controller â†’ Response    â”œâ”€â”€ logsDashboard.js        # Dashboard de logs- `subtrair` - SubtraÃ§Ã£o

                                â†“

                          Error Handler (se erro)    â””â”€â”€ logsRoutes.js           # API de logs- `multiplicar` - MultiplicaÃ§Ã£o

```

```- `dividir` - DivisÃ£o

### Componentes Principais

- `porcentagem` - CÃ¡lculo de percentual

#### 1. **BaseController**

Classe base que todos os controllers estendem, fornecendo:### Fluxo de RequisiÃ§Ã£o

- `success(res, data, message, statusCode)` - Resposta de sucesso padronizada

- `error(res, message, statusCode, errors)` - Resposta de erro padronizada**RequisiÃ§Ã£o:**

- `execute(req, res, handler)` - Wrapper com try-catch automÃ¡tico

``````bash

#### 2. **Auto-loader**

Sistema que descobre e registra rotas automaticamente:Cliente â†’ IP Filter â†’ CORS â†’ Validator â†’ Controller â†’ Responsecurl -X POST https://api.samm.host/calcular \

- Varre `src/functions/` em busca de arquivos `*Routes.js`

- Registra rotas no Express automaticamente                                â†“  -H "Content-Type: application/json" \

- Ignora pasta `_TEMPLATE`

                          Error Handler (se erro)  -d '{"operacao": "somar", "a": 10, "b": 5}'

#### 3. **Validator**

Middleware de validaÃ§Ã£o com schemas reutilizÃ¡veis:``````

- ValidaÃ§Ã£o de campos obrigatÃ³rios

- ValidaÃ§Ã£o de tipos de dados

- ValidaÃ§Ã£o de tamanho/comprimento

- ValidaÃ§Ã£o de valores enum### Componentes Principais**Resposta:**



#### 4. **Error Handler**```json

Tratamento global de erros:

- Captura todos os erros nÃ£o tratados#### 1. **BaseController**{

- Handler personalizado para 404

- Stack trace em ambiente de desenvolvimentoClasse base que todos os controllers estendem, fornecendo:  "operacao": "somar",



---- `success(res, data, message, statusCode)` - Resposta de sucesso padronizada  "a": 10,



## ğŸ†• Como Criar Nova Funcionalidade- `error(res, message, statusCode, errors)` - Resposta de erro padronizada  "b": 5,



### MÃ©todo RÃ¡pido (5 minutos)- `execute(req, res, handler)` - Wrapper com try-catch automÃ¡tico  "resultado": 15



```powershell}

# 1. Copiar template

Copy-Item -Path "src/functions/_TEMPLATE" -Destination "src/functions/minha-feature" -Recurse#### 2. **Auto-loader**```



# 2. Renomear arquivosSistema que descobre e registra rotas automaticamente:

# template* â†’ minhafeature*

- Varre `src/funcionalidades/` em busca de arquivos `*Routes.js`**Exemplo de Porcentagem:**

# 3. Editar controller e routes

# Implementar sua lÃ³gica- Registra rotas no Express automaticamente```bash



# 4. Reiniciar servidor- Ignora pasta `_TEMPLATE`curl -X POST https://api.samm.host/calcular \

npm start

  -H "Content-Type: application/json" \

# âœ… Pronto! As rotas serÃ£o descobertas automaticamente

```#### 3. **Validator**  -d '{"operacao": "porcentagem", "a": 100, "b": 15}'



### DocumentaÃ§Ã£o CompletaMiddleware de validaÃ§Ã£o com schemas reutilizÃ¡veis:```



Para um guia completo com exemplos, consulte:- ValidaÃ§Ã£o de campos obrigatÃ³riosRetorna: `15` (15% de 100)

**[src/functions/_TEMPLATE/README.md](src/functions/_TEMPLATE/README.md)**

- ValidaÃ§Ã£o de tipos

---

- ValidaÃ§Ã£o de comprimento---

## âš™ï¸ ConfiguraÃ§Ã£o

- ValidaÃ§Ã£o de valores enum

### VariÃ¡veis de Ambiente (.env)

## ğŸ”§ InstalaÃ§Ã£o

```env

# Servidor#### 4. **Error Handler**

PORT=3000

HOST=0.0.0.0Tratamento global de erros:### PrÃ©-requisitos

NODE_ENV=development

- Captura todos os erros nÃ£o tratados- Node.js >= 22.18.0

# SeguranÃ§a - IPs autorizados (separados por vÃ­rgula)

# Deixe vazio para permitir todos- Handler personalizado para 404- npm >= 10.x

ALLOWED_IPS=127.0.0.1,192.168.1.100,177.73.205.198

- Stack trace em ambiente de desenvolvimento

# CORS

CORS_ORIGIN=*### Passos



# Logs---

LOG_LEVEL=info

MAX_LOGS=1001. **Clone o repositÃ³rio:**

LOG_RETENTION_DAYS=7

## ğŸ“¡ Endpoints DisponÃ­veis```bash

# Upload

MAX_FILE_SIZE=5242880  # 5MB em bytesgit clone https://github.com/gilbertoromanholew/api.git

```

### Sistemacd api

### ConfiguraÃ§Ã£o de IPs Autorizados

```

Por padrÃ£o, `localhost` (127.0.0.1 e ::1) sempre Ã© permitido.

| MÃ©todo | Endpoint | DescriÃ§Ã£o |

**Adicionar IPs:**

```env|--------|----------|-----------|2. **Instale as dependÃªncias:**

ALLOWED_IPS=192.168.1.100,177.73.205.198,104.23.254.125

```| `GET` | `/` | InformaÃ§Ãµes da API em JSON |```bash



**âš ï¸ Importante:** Se usar Cloudflare ou proxy, configure como "DNS only" (desabilitar proxy) ou adicione o IP do proxy na lista.| `GET` | `/docs` | DocumentaÃ§Ã£o HTML interativa |npm install



---| `GET` | `/logs` | Dashboard de logs em tempo real |```



## ğŸ”’ SeguranÃ§a| `GET` | `/api/logs` | API de logs (JSON) |



### Filtro de IP3. **Configure as variÃ¡veis de ambiente:**



A API implementa um sistema de whitelist de IPs:### Funcionalidade: Exemplo (CRUD de UsuÃ¡rios)```bash

- âœ… **IPs autorizados** â†’ Acesso total Ã  API

- âŒ **IPs nÃ£o autorizados** â†’ Erro 403cp .env.example .env



**Sempre permitidos:**| MÃ©todo | Endpoint | DescriÃ§Ã£o |```

- `127.0.0.1` (localhost IPv4)

- `::1` (localhost IPv6)|--------|----------|-----------|



### DetecÃ§Ã£o de IP Real| `GET` | `/usuarios` | Lista todos os usuÃ¡rios (com filtros) |4. **Inicie o servidor:**



O filtro detecta automaticamente o IP real atravÃ©s de headers:| `GET` | `/usuarios/estatisticas` | EstatÃ­sticas dos usuÃ¡rios |```bash

- `X-Forwarded-For` (proxies, load balancers)

- `X-Real-IP` (nginx, Apache)| `GET` | `/usuarios/:id` | Busca usuÃ¡rio por ID |npm start

- `req.ip` (conexÃ£o direta)

| `POST` | `/usuarios` | Cria novo usuÃ¡rio |```

### Logs de Acesso

| `PUT` | `/usuarios/:id` | Atualiza usuÃ¡rio |

Todos os acessos sÃ£o registrados com:

- IP do cliente| `DELETE` | `/usuarios/:id` | Remove usuÃ¡rio |5. **Acesse a API:**

- Endpoint acessado

- Status da requisiÃ§Ã£o (autorizado/negado)```

- User-Agent

- Timestamp**Filtros disponÃ­veis em GET /usuarios:**http://localhost:3000



---- `?ativo=true/false` - Filtrar por status```



## ğŸš€ Deploy- `?idade_min=25` - Idade mÃ­nima



### Deploy em VPS- `?idade_max=40` - Idade mÃ¡xima---



1. **Conectar ao servidor:**

```bash

ssh usuario@seu-servidor.com### Funcionalidade: PDF## âš™ï¸ ConfiguraÃ§Ã£o

```



2. **Instalar Node.js:**

```bash| MÃ©todo | Endpoint | DescriÃ§Ã£o |### Arquivo `.env`

curl -fsSL https://deb.nodesource.com/setup_22.x | sudo -E bash -

sudo apt-get install -y nodejs|--------|----------|-----------|

```

| `POST` | `/read-pdf` | Extrai texto de arquivo PDF |Copie `.env.example` para `.env` e configure:

3. **Clonar e configurar:**

```bash

git clone https://github.com/gilbertoromanholew/api.git

cd api---```env

npm install

cp .env.example .env# Servidor

nano .env  # Editar configuraÃ§Ãµes

```## ğŸ†• Como Criar Nova FuncionalidadePORT=3000



4. **Instalar PM2:**HOST=0.0.0.0

```bash

sudo npm install -g pm2### MÃ©todo 1: Copiar Template (5 minutos)

```

# SeguranÃ§a - IPs autorizados (separados por vÃ­rgula)

5. **Iniciar aplicaÃ§Ã£o:**

```bash```powershellALLOWED_IPS=127.0.0.1,192.168.1.100,177.73.205.198

pm2 start server.js --name api

pm2 save# 1. Copiar template

pm2 startup  # Configurar inicializaÃ§Ã£o automÃ¡tica

```Copy-Item -Path "src/funcionalidades/_TEMPLATE" -Destination "src/funcionalidades/minha-feature" -Recurse# Logs



6. **Verificar status:**LOG_LEVEL=info

```bash

pm2 status# 2. Renomear arquivosLOG_FILE=false

pm2 logs api

```# template* â†’ minhafeature*```



### Configurar HTTPS (Nginx + Let's Encrypt)



1. **Instalar Nginx:**# 3. Editar controller e routes### ConfiguraÃ§Ã£o de IPs Autorizados

```bash

sudo apt install nginx# Implementar sua lÃ³gica

```

Por padrÃ£o, `localhost` (127.0.0.1 e ::1) sempre Ã© permitido. Adicione outros IPs conforme necessÃ¡rio:

2. **Configurar proxy reverso:**

```nginx# 4. Reiniciar servidor

# /etc/nginx/sites-available/api

server {npm start```env

    listen 80;

    server_name api.samm.host;ALLOWED_IPS=192.168.1.100,177.73.205.198,104.23.254.125



    location / {# âœ… Pronto! As rotas serÃ£o descobertas automaticamente```

        proxy_pass http://localhost:3000;

        proxy_http_version 1.1;```

        proxy_set_header Upgrade $http_upgrade;

        proxy_set_header Connection 'upgrade';**Importante:** Se usar Cloudflare ou proxy, desabilite o proxy (DNS only) ou adicione o IP do proxy.

        proxy_set_header Host $host;

        proxy_set_header X-Real-IP $remote_addr;### MÃ©todo 2: Manual

        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;

        proxy_cache_bypass $http_upgrade;---

    }

}1. **Criar pasta** em `src/funcionalidades/`## ğŸ“ Estrutura do Projeto

```

2. **Criar Controller** estendendo `BaseController`

3. **Ativar site:**

```bash3. **Criar Routes** exportando um `Router` do Express```

sudo ln -s /etc/nginx/sites-available/api /etc/nginx/sites-enabled/

sudo nginx -t4. **Reiniciar servidor** - Auto-descoberta farÃ¡ o resto!api/

sudo systemctl restart nginx

```â”œâ”€â”€ .env                         # VariÃ¡veis de ambiente (nÃ£o commitar)



4. **Instalar SSL:**### Exemplo MÃ­nimoâ”œâ”€â”€ .env.example                 # Template de configuraÃ§Ã£o

```bash

sudo apt install certbot python3-certbot-nginxâ”œâ”€â”€ .gitignore                   # Arquivos ignorados pelo git

sudo certbot --nginx -d api.samm.host

``````javascriptâ”œâ”€â”€ package.json                 # DependÃªncias e scripts



### Atualizar Deploy// src/funcionalidades/hello/helloController.jsâ”œâ”€â”€ package-lock.json            # Lock de dependÃªncias



```bashimport { BaseController } from '../../core/BaseController.js';â”œâ”€â”€ server.js                    # Arquivo principal da aplicaÃ§Ã£o

cd /caminho/da/api

git pull origin mainâ”œâ”€â”€ README.md                    # DocumentaÃ§Ã£o principal

npm install

pm2 restart apiclass HelloController extends BaseController {â”‚

```

    async sayHello(req, res) {â””â”€â”€ src/

---

        return this.execute(req, res, async (req, res) => {    â”œâ”€â”€ config/                  # ConfiguraÃ§Ãµes

## ğŸ“ Estrutura do Projeto

            const { nome } = req.body;    â”‚   â”œâ”€â”€ index.js             # Carrega variÃ¡veis do .env

```

api/            return this.success(res, { mensagem: `OlÃ¡, ${nome}!` });    â”‚   â””â”€â”€ allowedIPs.js        # Lista de IPs autorizados

â”œâ”€â”€ .env                         # VariÃ¡veis de ambiente (nÃ£o commitar)

â”œâ”€â”€ .gitignore                   # Arquivos ignorados        });    â”‚

â”œâ”€â”€ package.json                 # DependÃªncias e scripts

â”œâ”€â”€ server.js                    # Entry point    }    â”œâ”€â”€ middlewares/             # Middlewares Express

â”œâ”€â”€ README.md                    # Este arquivo

â”‚}    â”‚   â””â”€â”€ ipFilter.js          # Filtro de seguranÃ§a por IP

â””â”€â”€ src/

    â”œâ”€â”€ config/                  # ConfiguraÃ§Ãµes    â”‚

    â”‚   â”œâ”€â”€ index.js             # Carrega variÃ¡veis do .env

    â”‚   â””â”€â”€ allowedIPs.js        # Lista de IPs autorizadosexport default new HelloController();    â”œâ”€â”€ routes/                  # Rotas principais

    â”‚

    â”œâ”€â”€ core/                    # NÃºcleo da API```    â”‚   â”œâ”€â”€ index.js             # GET / (documentaÃ§Ã£o JSON)

    â”‚   â”œâ”€â”€ BaseController.js    # Classe base para controllers

    â”‚   â””â”€â”€ routeLoader.js       # Auto-loader de rotas    â”‚   â””â”€â”€ docs.js              # GET /docs (pÃ¡gina HTML)

    â”‚

    â”œâ”€â”€ middlewares/             # Middlewares Express```javascript    â”‚

    â”‚   â”œâ”€â”€ errorHandler.js      # Tratamento global de erros

    â”‚   â”œâ”€â”€ ipFilter.js          # Filtro de seguranÃ§a por IP// src/funcionalidades/hello/helloRoutes.js    â”œâ”€â”€ utils/                   # UtilitÃ¡rios

    â”‚   â””â”€â”€ validator.js         # ValidaÃ§Ã£o de requisiÃ§Ãµes

    â”‚import { Router } from 'express';    â”‚   â””â”€â”€ pdfParseWrapper.cjs  # Wrapper CommonJS para pdf-parse

    â”œâ”€â”€ routes/                  # Rotas de sistema

    â”‚   â”œâ”€â”€ index.js             # GET / (documentaÃ§Ã£o JSON)import helloController from './helloController.js';    â”‚

    â”‚   â”œâ”€â”€ docs.js              # GET /docs (pÃ¡gina HTML)

    â”‚   â”œâ”€â”€ logsDashboard.js     # GET /logs (dashboard)    â””â”€â”€ funcionalidades/         # Funcionalidades modulares

    â”‚   â””â”€â”€ logsRoutes.js        # API de logs

    â”‚const router = Router();        â”‚

    â”œâ”€â”€ utils/                   # UtilitÃ¡rios

    â”‚   â”œâ”€â”€ accessLogger.js      # Sistema de logsrouter.post('/hello', (req, res) => helloController.sayHello(req, res));        â”œâ”€â”€ validacao/           # ValidaÃ§Ã£o de documentos

    â”‚   â””â”€â”€ pdfParseWrapper.cjs  # Wrapper CommonJS para pdf-parse

    â”‚export default router;        â”‚   â”œâ”€â”€ README.md        # DocumentaÃ§Ã£o da funcionalidade

    â””â”€â”€ functions/               # Funcionalidades modulares

        â”‚```        â”‚   â”œâ”€â”€ cpfValidator.js  # Algoritmo de validaÃ§Ã£o CPF

        â”œâ”€â”€ _TEMPLATE/           # Template oficial

        â”‚   â”œâ”€â”€ README.md        # Guia completo (300+ linhas)        â”‚   â”œâ”€â”€ cpfController.js # Controller de requisiÃ§Ãµes

        â”‚   â”œâ”€â”€ templateController.js

        â”‚   â”œâ”€â”€ templateRoutes.js**Pronto!** Reinicie o servidor e acesse `POST /hello`        â”‚   â””â”€â”€ cpfRoutes.js     # Rotas: POST /validate-cpf

        â”‚   â””â”€â”€ templateUtils.js

        â”‚        â”‚

        â”œâ”€â”€ exemplo/             # Exemplo de CRUD

        â”‚   â”œâ”€â”€ exemploController.js---        â”œâ”€â”€ pdf/                 # Processamento de PDF

        â”‚   â””â”€â”€ exemploRoutes.js

        â”‚        â”‚   â”œâ”€â”€ README.md        # DocumentaÃ§Ã£o da funcionalidade

        â””â”€â”€ pdf/                 # Processamento de PDF

            â”œâ”€â”€ README.md        # DocumentaÃ§Ã£o especÃ­fica## âš™ï¸ ConfiguraÃ§Ã£o        â”‚   â”œâ”€â”€ pdfController.js # Controller de PDF

            â”œâ”€â”€ pdfController.js

            â””â”€â”€ pdfRoutes.js        â”‚   â””â”€â”€ pdfRoutes.js     # Rotas: POST /read-pdf

```

### VariÃ¡veis de Ambiente (.env)        â”‚

**Total:** ~20 arquivos essenciais de cÃ³digo + documentaÃ§Ã£o

        â”œâ”€â”€ calculo/             # OperaÃ§Ãµes matemÃ¡ticas

---

```env        â”‚   â”œâ”€â”€ README.md        # DocumentaÃ§Ã£o da funcionalidade

## ğŸ› Troubleshooting

# Servidor        â”‚   â”œâ”€â”€ calculoUtils.js  # FunÃ§Ãµes matemÃ¡ticas

### Erro: "Cannot find module"

```bashPORT=3000        â”‚   â”œâ”€â”€ calculoController.js # Controller de cÃ¡lculos

npm install

pm2 restart apiHOST=0.0.0.0        â”‚   â””â”€â”€ calculoRoutes.js # Rotas: POST /calcular

```

NODE_ENV=development        â”‚

### Erro: Porta 3000 jÃ¡ em uso

```bash        â””â”€â”€ extras/              # Funcionalidades futuras

# Windows (PowerShell)

Get-Process -Id (Get-NetTCPConnection -LocalPort 3000).OwningProcess | Stop-Process# SeguranÃ§a            â””â”€â”€ README.md        # Planejamento de features



# Linux/MacALLOWED_IPS=192.168.1.1,10.0.0.1  # IPs permitidos (vazio = todos)```

lsof -ti:3000 | xargs kill -9

CORS_ORIGIN=*                     # Origem CORS permitida

# Ou mudar a porta no .env

PORT=3001**Total:** ~20 arquivos essenciais de cÃ³digo + documentaÃ§Ã£o

```

# Rate Limiting

### Erro 403 mesmo com IP autorizado

RATE_LIMIT_WINDOW=60000           # Janela em ms (1 min)---

1. Verifique o IP detectado nos logs:

```bashRATE_LIMIT_MAX=100                # MÃ¡ximo de requisiÃ§Ãµes

pm2 logs api

```## ğŸ”’ SeguranÃ§a



2. Se estiver usando Cloudflare:# Logs

   - Acesse o painel do Cloudflare

   - VÃ¡ em DNSMAX_LOGS=100                      # MÃ¡ximo de logs em memÃ³ria### Filtro de IP

   - Desabilite o proxy (nuvem laranja â†’ cinza)

LOG_RETENTION_DAYS=7              # Dias para manter logs

3. Se estiver atrÃ¡s de proxy/load balancer:

   - Verifique os headers `X-Forwarded-For` ou `X-Real-IP`A API implementa um sistema de whitelist de IPs:

   - Adicione o IP do proxy na lista de permitidos

# Upload

### PDF nÃ£o estÃ¡ sendo lido

MAX_FILE_SIZE=5242880             # Tamanho mÃ¡ximo (5MB)- âœ… **IPs autorizados** â†’ Acesso total Ã  API

1. Verifique o formato do arquivo (deve ser PDF vÃ¡lido)

2. Verifique o tamanho (limite padrÃ£o de 5MB)```- âŒ **IPs nÃ£o autorizados** â†’ Erro 403

3. Verifique se o campo do form-data Ã© `pdf`



### Rotas nÃ£o sendo descobertas

### ConfiguraÃ§Ã£o Centralizada**ConfiguraÃ§Ã£o no `.env`:**

1. Verifique se o arquivo termina com `Routes.js`

2. Verifique se tem `export default router` no final```env

3. Reinicie o servidor

Todas as configuraÃ§Ãµes estÃ£o em `src/config/index.js`:ALLOWED_IPS=192.168.1.100,177.73.205.198

---

```

## ğŸ¤ Contribuindo

```javascript

ContribuiÃ§Ãµes sÃ£o bem-vindas! Siga os passos:

import config from './src/config/index.js';**Sempre permitidos:**

1. **Fork** o projeto

2. **Crie uma branch** para sua feature (`git checkout -b feature/MinhaFeature`)- `127.0.0.1` (localhost IPv4)

3. **Commit suas mudanÃ§as** (`git commit -m 'feat: Adiciona MinhaFeature'`)

4. **Push para a branch** (`git push origin feature/MinhaFeature`)// Uso- `::1` (localhost IPv6)

5. **Abra um Pull Request**

config.server.port        // 3000

### PadrÃ£o de Commits

config.security.corsOrigin  // '*'### Suporte a Proxies

Seguimos [Conventional Commits](https://www.conventionalcommits.org/):

- `feat:` Nova funcionalidadeconfig.logs.maxLogs       // 100

- `fix:` CorreÃ§Ã£o de bug

- `docs:` DocumentaÃ§Ã£oconfig.upload.maxFileSize // 5242880O filtro de IP detecta automaticamente o IP real atravÃ©s de headers:

- `refactor:` RefatoraÃ§Ã£o de cÃ³digo

- `test:` Testes```- `X-Forwarded-For` (proxies, load balancers)

- `chore:` Tarefas de manutenÃ§Ã£o

- `X-Real-IP` (nginx, Apache)

---

---- `req.ip` (conexÃ£o direta)

## ğŸ“„ LicenÃ§a



Este projeto estÃ¡ sob a licenÃ§a **MIT**. Veja o arquivo [LICENSE](LICENSE) para mais detalhes.

## ğŸ’¡ Exemplos de Uso**Cloudflare:** Configure como "DNS only" (desabilitar proxy) para que o IP real seja detectado.

---



## ğŸ‘¨â€ğŸ’» Autor

### Exemplo 1: Listar UsuÃ¡rios com Filtros---

**Gilberto Romano Holew**

- GitHub: [@gilbertoromanholew](https://github.com/gilbertoromanholew)

- Website: https://api.samm.host

**RequisiÃ§Ã£o:**## ğŸš€ Deploy

---

```bash

## ğŸ“ Suporte

curl "http://localhost:3000/usuarios?ativo=true&idade_min=25&idade_max=35"### Deploy em VPS

Para questÃµes ou problemas:

- Abra uma [issue](https://github.com/gilbertoromanholew/api/issues)```

- Consulte a documentaÃ§Ã£o em [/docs](https://api.samm.host/docs)

1. **Conectar ao servidor:**

---

**Resposta:**```bash

## ğŸ“Š Status

```jsonssh usuario@seu-servidor.com

- **VersÃ£o:** 2.0.0

- **Status:** âœ… Online e funcional{```

- **Ãšltima atualizaÃ§Ã£o:** 16 de outubro de 2025

- **Node.js:** >= 22.18.0  "success": true,

- **Express:** 5.1.0

  "message": "2 usuÃ¡rio(s) encontrado(s)",2. **Instalar Node.js (se necessÃ¡rio):**

---

  "data": {```bash

<div align="center">

    "total": 2,curl -fsSL https://deb.nodesource.com/setup_22.x | sudo -E bash -

**â­ Se este projeto foi Ãºtil, considere dar uma estrela! â­**

    "usuarios": [sudo apt-get install -y nodejs

Feito com â¤ï¸ por [Gilberto Romanhole](https://github.com/gilbertoromanholew)

      {```

</div>

        "id": 1,

        "nome": "JoÃ£o Silva",3. **Clonar o repositÃ³rio:**

        "email": "joao@exemplo.com",```bash

        "idade": 30,git clone https://github.com/gilbertoromanholew/api.git

        "ativo": truecd api

      },```

      {

        "id": 2,4. **Instalar dependÃªncias:**

        "nome": "Maria Santos",```bash

        "email": "maria@exemplo.com",npm install

        "idade": 25,```

        "ativo": true

      }5. **Configurar variÃ¡veis:**

    ]```bash

  }cp .env.example .env

}nano .env  # Editar configuraÃ§Ãµes

``````



### Exemplo 2: Criar UsuÃ¡rio6. **Instalar PM2 (gerenciador de processos):**

```bash

**RequisiÃ§Ã£o:**sudo npm install -g pm2

```bash```

curl -X POST http://localhost:3000/usuarios \

  -H "Content-Type: application/json" \7. **Iniciar a aplicaÃ§Ã£o:**

  -d '{```bash

    "nome": "Pedro Costa",pm2 start server.js --name api

    "email": "pedro@exemplo.com",pm2 save

    "idade": 28,pm2 startup  # Configurar inicializaÃ§Ã£o automÃ¡tica

    "ativo": true```

  }'

```8. **Verificar status:**

```bash

**Resposta:**pm2 status

```jsonpm2 logs api

{```

  "success": true,

  "message": "UsuÃ¡rio criado com sucesso",### Atualizar Deploy

  "data": {

    "id": 4,```bash

    "nome": "Pedro Costa",cd /caminho/da/api

    "email": "pedro@exemplo.com",git pull origin main

    "idade": 28,npm install

    "ativo": true,pm2 restart api

    "criadoEm": "2025-10-16T19:30:00.000Z"```

  }

}### Configurar HTTPS (Nginx + Let's Encrypt)

```

1. **Instalar Nginx:**

### Exemplo 3: Erro de ValidaÃ§Ã£o```bash

sudo apt install nginx

**RequisiÃ§Ã£o:**```

```bash

curl -X POST http://localhost:3000/usuarios \2. **Configurar proxy reverso:**

  -H "Content-Type: application/json" \```nginx

  -d '{"nome": "Jo"}'  # Nome muito curto# /etc/nginx/sites-available/api

```server {

    listen 80;

**Resposta:**    server_name api.samm.host;

```json

{    location / {

  "success": false,        proxy_pass http://localhost:3000;

  "message": "Erro de validaÃ§Ã£o",        proxy_http_version 1.1;

  "errors": [        proxy_set_header Upgrade $http_upgrade;

    "Campo 'email' Ã© obrigatÃ³rio",        proxy_set_header Connection 'upgrade';

    "Campo 'idade' Ã© obrigatÃ³rio",        proxy_set_header Host $host;

    "Campo 'nome' deve ter entre 3 e 100 caracteres"        proxy_set_header X-Real-IP $remote_addr;

  ]        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;

}        proxy_cache_bypass $http_upgrade;

```    }

}

### Exemplo 4: Ler PDF```



**RequisiÃ§Ã£o:**3. **Ativar site:**

```bash```bash

curl -X POST http://localhost:3000/read-pdf \sudo ln -s /etc/nginx/sites-available/api /etc/nginx/sites-enabled/

  -F "pdf=@documento.pdf"sudo nginx -t

```sudo systemctl restart nginx

```

**Resposta:**

```json4. **Instalar SSL:**

{```bash

  "success": true,sudo apt install certbot python3-certbot-nginx

  "message": "PDF processado com sucesso",sudo certbot --nginx -d api.samm.host

  "data": {```

    "text": "ConteÃºdo extraÃ­do do PDF...",

    "pages": 5,---

    "info": {

      "Title": "Documento Exemplo",## ğŸ› ï¸ Desenvolvimento

      "Author": "JoÃ£o Silva"

    },### Adicionar Nova Funcionalidade

    "metadata": {

      "CreationDate": "2025-10-16T10:00:00.000Z"1. **Criar estrutura:**

    }```bash

  }mkdir -p src/funcionalidades/minha-funcionalidade

}cd src/funcionalidades/minha-funcionalidade

``````



---2. **Criar arquivos:**



## ğŸ“‚ Estrutura do Projeto**`README.md`** - DocumentaÃ§Ã£o

```markdown

```# Minha Funcionalidade

api/

â”œâ”€â”€ src/## DescriÃ§Ã£o

â”‚   â”œâ”€â”€ core/...

â”‚   â”‚   â”œâ”€â”€ BaseController.js        # Classe base para controllers

â”‚   â”‚   â””â”€â”€ routeLoader.js            # Auto-carregador de rotas## Endpoint

â”‚   â”œâ”€â”€ middlewares/POST /minha-rota

â”‚   â”‚   â”œâ”€â”€ errorHandler.js           # Tratamento global de erros

â”‚   â”‚   â”œâ”€â”€ ipFilter.js               # Filtro de IP## ParÃ¢metros

â”‚   â”‚   â””â”€â”€ validator.js              # ValidaÃ§Ã£o centralizada...

â”‚   â”œâ”€â”€ funcionalidades/```

â”‚   â”‚   â”œâ”€â”€ _TEMPLATE/                # ğŸ“¦ Template para novas features

â”‚   â”‚   â”‚   â”œâ”€â”€ README.md**`minhaController.js`** - LÃ³gica

â”‚   â”‚   â”‚   â”œâ”€â”€ templateController.js```javascript

â”‚   â”‚   â”‚   â”œâ”€â”€ templateRoutes.jsexport const minhaFuncao = (req, res) => {

â”‚   â”‚   â”‚   â””â”€â”€ templateUtils.js    const { parametro } = req.body;

â”‚   â”‚   â”œâ”€â”€ exemplo/                  # âœ… CRUD de usuÃ¡rios    

â”‚   â”‚   â”‚   â”œâ”€â”€ exemploController.js    // Sua lÃ³gica aqui

â”‚   â”‚   â”‚   â””â”€â”€ exemploRoutes.js    

â”‚   â”‚   â””â”€â”€ pdf/                      # ğŸ“„ Leitura de PDF    res.json({ resultado: 'sucesso' });

â”‚   â”‚       â”œâ”€â”€ pdfController.js};

â”‚   â”‚       â””â”€â”€ pdfRoutes.js```

â”‚   â”œâ”€â”€ config/

â”‚   â”‚   â””â”€â”€ index.js                  # ConfiguraÃ§Ãµes centralizadas**`minhaRoutes.js`** - Rotas

â”‚   â”œâ”€â”€ routes/```javascript

â”‚   â”‚   â”œâ”€â”€ docs.js                   # DocumentaÃ§Ã£o HTMLimport express from 'express';

â”‚   â”‚   â”œâ”€â”€ index.js                  # Rotas de sistemaimport { minhaFuncao } from './minhaController.js';

â”‚   â”‚   â”œâ”€â”€ logsDashboard.js          # Dashboard de logs

â”‚   â”‚   â””â”€â”€ logsRoutes.js             # API de logsconst router = express.Router();

â”‚   â””â”€â”€ utils/

â”‚       â”œâ”€â”€ ipLogger.js               # Logger de acessosrouter.post('/minha-rota', minhaFuncao);

â”‚       â””â”€â”€ pdfParseWrapper.cjs       # Wrapper para pdf-parse

â”œâ”€â”€ .env                              # VariÃ¡veis de ambienteexport default router;

â”œâ”€â”€ .env.example                      # Exemplo de configuraÃ§Ã£o```

â”œâ”€â”€ package.json                      # DependÃªncias

â”œâ”€â”€ server.js                         # Entry point3. **Registrar no `server.js`:**

â””â”€â”€ README.md                         # Este arquivo```javascript

```import minhaRoutes from './src/funcionalidades/minha-funcionalidade/minhaRoutes.js';



---// ... outras importaÃ§Ãµes ...



## ğŸ“š DocumentaÃ§Ã£o Adicionalapp.use(minhaRoutes);

```

- **[GUIA_RAPIDO.md](./GUIA_RAPIDO.md)** - Guia de inÃ­cio rÃ¡pido (5 minutos)

- **[IMPLEMENTACAO_CONCLUIDA.md](./IMPLEMENTACAO_CONCLUIDA.md)** - DocumentaÃ§Ã£o tÃ©cnica completa4. **Atualizar documentaÃ§Ã£o em `src/routes/index.js`**

- **[SUGESTOES_MELHORIA.md](./SUGESTOES_MELHORIA.md)** - DecisÃµes de arquitetura

- **[RESUMO_EXECUTIVO.md](./RESUMO_EXECUTIVO.md)** - Resumo executivo da implementaÃ§Ã£o5. **Testar:**

- **[src/funcionalidades/_TEMPLATE/README.md](./src/funcionalidades/_TEMPLATE/README.md)** - Como criar novas funcionalidades```bash

npm start

---

curl -X POST http://localhost:3000/minha-rota \

## ğŸ¯ Roadmap  -H "Content-Type: application/json" \

  -d '{"parametro": "valor"}'

### âœ… Implementado (v2.0)```



- [x] Auto-carregamento de rotas### Scripts disponÃ­veis

- [x] BaseController padronizado

- [x] Sistema de validaÃ§Ã£o centralizado```bash

- [x] Tratamento global de errosnpm start       # Inicia o servidor

- [x] Dashboard de documentaÃ§Ã£onpm test        # (adicionar testes no futuro)

- [x] Sistema de templates```

- [x] Logs de acesso

- [x] Filtro de IP### DependÃªncias



### ğŸš§ Em Planejamento (v3.0)**ProduÃ§Ã£o:**

- `express@5.1.0` - Framework web

- [ ] Testes automatizados (Jest)- `cors` - Cross-Origin Resource Sharing

- [ ] OpenAPI/Swagger docs- `dotenv` - VariÃ¡veis de ambiente

- [ ] Rate limiting avanÃ§ado- `multer` - Upload de arquivos

- [ ] Cache com Redis- `pdf-parse@1.1.1` - ExtraÃ§Ã£o de texto de PDF

- [ ] WebSockets

- [ ] AutenticaÃ§Ã£o JWT**Desenvolvimento:**

- [ ] Docker containerization- Node.js >= 22.18.0

- [ ] CI/CD pipeline

---

---

## ğŸ“ DocumentaÃ§Ã£o de Funcionalidades

## ğŸ¤ Contribuindo

Cada funcionalidade possui sua prÃ³pria documentaÃ§Ã£o detalhada:

ContribuiÃ§Ãµes sÃ£o bem-vindas! Siga os passos:

- [ValidaÃ§Ã£o de CPF](src/funcionalidades/validacao/README.md)

1. **Fork** o projeto- [Leitura de PDF](src/funcionalidades/pdf/README.md)

2. **Crie uma branch** para sua feature (`git checkout -b feature/MinhaFeature`)- [Calculadora](src/funcionalidades/calculo/README.md)

3. **Commit suas mudanÃ§as** (`git commit -m 'feat: Adiciona MinhaFeature'`)- [Extras (Futuras)](src/funcionalidades/extras/README.md)

4. **Push para a branch** (`git push origin feature/MinhaFeature`)

5. **Abra um Pull Request**---



### PadrÃ£o de Commits## ğŸ› Troubleshooting



Seguimos [Conventional Commits](https://www.conventionalcommits.org/):### Erro: "Cannot find module"

```bash

- `feat:` Nova funcionalidadenpm install

- `fix:` CorreÃ§Ã£o de bugpm2 restart api

- `docs:` DocumentaÃ§Ã£o```

- `refactor:` RefatoraÃ§Ã£o de cÃ³digo

- `test:` Testes### Erro: Porta 3000 jÃ¡ em uso

- `chore:` Tarefas de manutenÃ§Ã£o```bash

# Encontrar processo na porta 3000

---lsof -ti:3000



## ğŸ“„ LicenÃ§a# Matar processo

lsof -ti:3000 | xargs kill -9

Este projeto estÃ¡ sob a licenÃ§a **MIT**. Veja o arquivo [LICENSE](LICENSE) para mais detalhes.

# Ou mudar a porta no .env

---PORT=3001

```

## ğŸ‘¨â€ğŸ’» Autor

### Erro 403 mesmo com IP autorizado

**Gilberto Romanhole**

1. Verifique o IP detectado nos logs:

- GitHub: [@gilbertoromanholew](https://github.com/gilbertoromanholew)```bash

- RepositÃ³rio: [github.com/gilbertoromanholew/api](https://github.com/gilbertoromanholew/api)pm2 logs api

```

---

2. Se estiver usando Cloudflare:

## ğŸ“ Suporte   - Acesse o painel do Cloudflare

   - VÃ¡ em DNS

- ğŸ“– Veja a [DocumentaÃ§Ã£o Completa](./GUIA_RAPIDO.md)   - Desabilite o proxy (nuvem laranja â†’ cinza)

- ğŸ› Reporte bugs via [Issues](https://github.com/gilbertoromanholew/api/issues)

- ğŸ’¬ Tire dÃºvidas nas [Discussions](https://github.com/gilbertoromanholew/api/discussions)3. Se estiver atrÃ¡s de proxy/load balancer:

   - Verifique os headers `X-Forwarded-For` ou `X-Real-IP`

---   - Adicione o IP do proxy na lista de permitidos



## ğŸŒŸ MÃ©tricas### PDF nÃ£o estÃ¡ sendo lido



| MÃ©trica | Valor |1. Verifique o formato do arquivo (deve ser PDF vÃ¡lido)

|---------|-------|2. Verifique o tamanho (multer tem limite padrÃ£o)

| **Tempo para criar funcionalidade** | 5 minutos (70% mais rÃ¡pido) |3. Verifique se o campo do form-data Ã© `pdf`

| **Linhas de cÃ³digo por controller** | 15-20 linhas (50% menos) |

| **Tempo de configuraÃ§Ã£o** | 30 segundos (95% mais rÃ¡pido) |---

| **Cobertura de testes** | Em desenvolvimento |

## ğŸ“„ LicenÃ§a

---

Este projeto Ã© proprietÃ¡rio. Todos os direitos reservados.

## ğŸ‰ Agradecimentos

---

- [Express.js](https://expressjs.com/) - Framework web minimalista

- [Node.js](https://nodejs.org/) - Runtime JavaScript## ğŸ‘¨â€ğŸ’» Autor

- [pdf-parse](https://www.npmjs.com/package/pdf-parse) - ExtraÃ§Ã£o de texto de PDF

- [dotenv](https://www.npmjs.com/package/dotenv) - Gerenciamento de variÃ¡veis de ambiente**Gilberto Romano Holew**

- GitHub: [@gilbertoromanholew](https://github.com/gilbertoromanholew)

---- Website: https://api.samm.host



<div align="center">---



**â­ Se este projeto foi Ãºtil, considere dar uma estrela! â­**## ğŸ“ Suporte



Feito com â¤ï¸ por [Gilberto Romanhole](https://github.com/gilbertoromanholew)Para questÃµes ou problemas:

- Abra uma [issue](https://github.com/gilbertoromanholew/api/issues)

</div>- Entre em contato atravÃ©s do site


---

## ğŸ“Š Status

- **VersÃ£o:** 2.0.0
- **Status:** âœ… Online e funcional
- **Ãšltima atualizaÃ§Ã£o:** 16 de outubro de 2025
- **Node.js:** >= 22.18.0
- **Express:** 5.1.0

---

**âš¡ API desenvolvida com foco em modularidade, seguranÃ§a e escalabilidade.**
